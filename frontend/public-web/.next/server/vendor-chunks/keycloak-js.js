"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/keycloak-js";
exports.ids = ["vendor-chunks/keycloak-js"];
exports.modules = {

/***/ "(ssr)/./node_modules/keycloak-js/dist/keycloak.mjs":
/*!****************************************************!*\
  !*** ./node_modules/keycloak-js/dist/keycloak.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Keycloak)\n/* harmony export */ });\n/* harmony import */ var base64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! base64-js */ \"(ssr)/./node_modules/base64-js/index.js\");\n/* harmony import */ var js_sha256__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js-sha256 */ \"(ssr)/./node_modules/js-sha256/src/sha256.js\");\n/* harmony import */ var jwt_decode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jwt-decode */ \"(ssr)/./node_modules/jwt-decode/build/esm/index.js\");\n\n\n\n/*\n * Copyright 2016 Red Hat, Inc. and/or its affiliates\n * and other contributors as indicated by the @author tags.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */ if (typeof Promise === \"undefined\") {\n    throw Error(\"Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.\");\n}\nfunction Keycloak(config) {\n    if (!(this instanceof Keycloak)) {\n        throw new Error(\"The 'Keycloak' constructor must be invoked with 'new'.\");\n    }\n    var kc = this;\n    var adapter;\n    var refreshQueue = [];\n    var callbackStorage;\n    var loginIframe = {\n        enable: true,\n        callbackList: [],\n        interval: 5\n    };\n    var scripts = document.getElementsByTagName(\"script\");\n    for(var i = 0; i < scripts.length; i++){\n        if ((scripts[i].src.indexOf(\"keycloak.js\") !== -1 || scripts[i].src.indexOf(\"keycloak.min.js\") !== -1) && scripts[i].src.indexOf(\"version=\") !== -1) {\n            kc.iframeVersion = scripts[i].src.substring(scripts[i].src.indexOf(\"version=\") + 8).split(\"&\")[0];\n        }\n    }\n    var useNonce = true;\n    var logInfo = createLogger(console.info);\n    var logWarn = createLogger(console.warn);\n    kc.init = function(initOptions) {\n        if (kc.didInitialize) {\n            throw new Error(\"A 'Keycloak' instance can only be initialized once.\");\n        }\n        kc.didInitialize = true;\n        kc.authenticated = false;\n        callbackStorage = createCallbackStorage();\n        var adapters = [\n            \"default\",\n            \"cordova\",\n            \"cordova-native\"\n        ];\n        if (initOptions && adapters.indexOf(initOptions.adapter) > -1) {\n            adapter = loadAdapter(initOptions.adapter);\n        } else if (initOptions && typeof initOptions.adapter === \"object\") {\n            adapter = initOptions.adapter;\n        } else {\n            if (window.Cordova || window.cordova) {\n                adapter = loadAdapter(\"cordova\");\n            } else {\n                adapter = loadAdapter();\n            }\n        }\n        if (initOptions) {\n            if (typeof initOptions.useNonce !== \"undefined\") {\n                useNonce = initOptions.useNonce;\n            }\n            if (typeof initOptions.checkLoginIframe !== \"undefined\") {\n                loginIframe.enable = initOptions.checkLoginIframe;\n            }\n            if (initOptions.checkLoginIframeInterval) {\n                loginIframe.interval = initOptions.checkLoginIframeInterval;\n            }\n            if (initOptions.onLoad === \"login-required\") {\n                kc.loginRequired = true;\n            }\n            if (initOptions.responseMode) {\n                if (initOptions.responseMode === \"query\" || initOptions.responseMode === \"fragment\") {\n                    kc.responseMode = initOptions.responseMode;\n                } else {\n                    throw \"Invalid value for responseMode\";\n                }\n            }\n            if (initOptions.flow) {\n                switch(initOptions.flow){\n                    case \"standard\":\n                        kc.responseType = \"code\";\n                        break;\n                    case \"implicit\":\n                        kc.responseType = \"id_token token\";\n                        break;\n                    case \"hybrid\":\n                        kc.responseType = \"code id_token token\";\n                        break;\n                    default:\n                        throw \"Invalid value for flow\";\n                }\n                kc.flow = initOptions.flow;\n            }\n            if (initOptions.timeSkew != null) {\n                kc.timeSkew = initOptions.timeSkew;\n            }\n            if (initOptions.redirectUri) {\n                kc.redirectUri = initOptions.redirectUri;\n            }\n            if (initOptions.silentCheckSsoRedirectUri) {\n                kc.silentCheckSsoRedirectUri = initOptions.silentCheckSsoRedirectUri;\n            }\n            if (typeof initOptions.silentCheckSsoFallback === \"boolean\") {\n                kc.silentCheckSsoFallback = initOptions.silentCheckSsoFallback;\n            } else {\n                kc.silentCheckSsoFallback = true;\n            }\n            if (initOptions.pkceMethod) {\n                if (initOptions.pkceMethod !== \"S256\") {\n                    throw \"Invalid value for pkceMethod\";\n                }\n                kc.pkceMethod = initOptions.pkceMethod;\n            }\n            if (typeof initOptions.enableLogging === \"boolean\") {\n                kc.enableLogging = initOptions.enableLogging;\n            } else {\n                kc.enableLogging = false;\n            }\n            if (typeof initOptions.scope === \"string\") {\n                kc.scope = initOptions.scope;\n            }\n            if (typeof initOptions.acrValues === \"string\") {\n                kc.acrValues = initOptions.acrValues;\n            }\n            if (typeof initOptions.messageReceiveTimeout === \"number\" && initOptions.messageReceiveTimeout > 0) {\n                kc.messageReceiveTimeout = initOptions.messageReceiveTimeout;\n            } else {\n                kc.messageReceiveTimeout = 10000;\n            }\n        }\n        if (!kc.responseMode) {\n            kc.responseMode = \"fragment\";\n        }\n        if (!kc.responseType) {\n            kc.responseType = \"code\";\n            kc.flow = \"standard\";\n        }\n        var promise = createPromise();\n        var initPromise = createPromise();\n        initPromise.promise.then(function() {\n            kc.onReady && kc.onReady(kc.authenticated);\n            promise.setSuccess(kc.authenticated);\n        }).catch(function(error) {\n            promise.setError(error);\n        });\n        var configPromise = loadConfig();\n        function onLoad() {\n            var doLogin = function(prompt) {\n                if (!prompt) {\n                    options.prompt = \"none\";\n                }\n                if (initOptions && initOptions.locale) {\n                    options.locale = initOptions.locale;\n                }\n                kc.login(options).then(function() {\n                    initPromise.setSuccess();\n                }).catch(function(error) {\n                    initPromise.setError(error);\n                });\n            };\n            var checkSsoSilently = function() {\n                var ifrm = document.createElement(\"iframe\");\n                var src = kc.createLoginUrl({\n                    prompt: \"none\",\n                    redirectUri: kc.silentCheckSsoRedirectUri\n                });\n                ifrm.setAttribute(\"src\", src);\n                ifrm.setAttribute(\"sandbox\", \"allow-storage-access-by-user-activation allow-scripts allow-same-origin\");\n                ifrm.setAttribute(\"title\", \"keycloak-silent-check-sso\");\n                ifrm.style.display = \"none\";\n                document.body.appendChild(ifrm);\n                var messageCallback = function(event) {\n                    if (event.origin !== window.location.origin || ifrm.contentWindow !== event.source) {\n                        return;\n                    }\n                    var oauth = parseCallback(event.data);\n                    processCallback(oauth, initPromise);\n                    document.body.removeChild(ifrm);\n                    window.removeEventListener(\"message\", messageCallback);\n                };\n                window.addEventListener(\"message\", messageCallback);\n            };\n            var options = {};\n            switch(initOptions.onLoad){\n                case \"check-sso\":\n                    if (loginIframe.enable) {\n                        setupCheckLoginIframe().then(function() {\n                            checkLoginIframe().then(function(unchanged) {\n                                if (!unchanged) {\n                                    kc.silentCheckSsoRedirectUri ? checkSsoSilently() : doLogin(false);\n                                } else {\n                                    initPromise.setSuccess();\n                                }\n                            }).catch(function(error) {\n                                initPromise.setError(error);\n                            });\n                        });\n                    } else {\n                        kc.silentCheckSsoRedirectUri ? checkSsoSilently() : doLogin(false);\n                    }\n                    break;\n                case \"login-required\":\n                    doLogin(true);\n                    break;\n                default:\n                    throw \"Invalid value for onLoad\";\n            }\n        }\n        function processInit() {\n            var callback = parseCallback(window.location.href);\n            if (callback) {\n                window.history.replaceState(window.history.state, null, callback.newUrl);\n            }\n            if (callback && callback.valid) {\n                return setupCheckLoginIframe().then(function() {\n                    processCallback(callback, initPromise);\n                }).catch(function(error) {\n                    initPromise.setError(error);\n                });\n            } else if (initOptions) {\n                if (initOptions.token && initOptions.refreshToken) {\n                    setToken(initOptions.token, initOptions.refreshToken, initOptions.idToken);\n                    if (loginIframe.enable) {\n                        setupCheckLoginIframe().then(function() {\n                            checkLoginIframe().then(function(unchanged) {\n                                if (unchanged) {\n                                    kc.onAuthSuccess && kc.onAuthSuccess();\n                                    initPromise.setSuccess();\n                                    scheduleCheckIframe();\n                                } else {\n                                    initPromise.setSuccess();\n                                }\n                            }).catch(function(error) {\n                                initPromise.setError(error);\n                            });\n                        });\n                    } else {\n                        kc.updateToken(-1).then(function() {\n                            kc.onAuthSuccess && kc.onAuthSuccess();\n                            initPromise.setSuccess();\n                        }).catch(function(error) {\n                            kc.onAuthError && kc.onAuthError();\n                            if (initOptions.onLoad) {\n                                onLoad();\n                            } else {\n                                initPromise.setError(error);\n                            }\n                        });\n                    }\n                } else if (initOptions.onLoad) {\n                    onLoad();\n                } else {\n                    initPromise.setSuccess();\n                }\n            } else {\n                initPromise.setSuccess();\n            }\n        }\n        function domReady() {\n            var promise = createPromise();\n            var checkReadyState = function() {\n                if (document.readyState === \"interactive\" || document.readyState === \"complete\") {\n                    document.removeEventListener(\"readystatechange\", checkReadyState);\n                    promise.setSuccess();\n                }\n            };\n            document.addEventListener(\"readystatechange\", checkReadyState);\n            checkReadyState(); // just in case the event was already fired and we missed it (in case the init is done later than at the load time, i.e. it's done from code)\n            return promise.promise;\n        }\n        configPromise.then(function() {\n            domReady().then(check3pCookiesSupported).then(processInit).catch(function(error) {\n                promise.setError(error);\n            });\n        });\n        configPromise.catch(function(error) {\n            promise.setError(error);\n        });\n        return promise.promise;\n    };\n    kc.login = function(options) {\n        return adapter.login(options);\n    };\n    function generateRandomData(len) {\n        // use web crypto APIs if possible\n        var array = null;\n        var crypto = window.crypto || window.msCrypto;\n        if (crypto && crypto.getRandomValues && window.Uint8Array) {\n            array = new Uint8Array(len);\n            crypto.getRandomValues(array);\n            return array;\n        }\n        // fallback to Math random\n        array = new Array(len);\n        for(var j = 0; j < array.length; j++){\n            array[j] = Math.floor(256 * Math.random());\n        }\n        return array;\n    }\n    function generateCodeVerifier(len) {\n        return generateRandomString(len, \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\");\n    }\n    function generateRandomString(len, alphabet) {\n        var randomData = generateRandomData(len);\n        var chars = new Array(len);\n        for(var i = 0; i < len; i++){\n            chars[i] = alphabet.charCodeAt(randomData[i] % alphabet.length);\n        }\n        return String.fromCharCode.apply(null, chars);\n    }\n    function generatePkceChallenge(pkceMethod, codeVerifier) {\n        switch(pkceMethod){\n            // The use of the \"plain\" method is considered insecure and therefore not supported.\n            case \"S256\":\n                // hash codeVerifier, then encode as url-safe base64 without padding\n                var hashBytes = new Uint8Array(js_sha256__WEBPACK_IMPORTED_MODULE_1__.arrayBuffer(codeVerifier));\n                var encodedHash = base64_js__WEBPACK_IMPORTED_MODULE_0__.fromByteArray(hashBytes).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/\\=/g, \"\");\n                return encodedHash;\n            default:\n                throw \"Invalid value for pkceMethod\";\n        }\n    }\n    function buildClaimsParameter(requestedAcr) {\n        var claims = {\n            id_token: {\n                acr: requestedAcr\n            }\n        };\n        return JSON.stringify(claims);\n    }\n    kc.createLoginUrl = function(options) {\n        var state = createUUID();\n        var nonce = createUUID();\n        var redirectUri = adapter.redirectUri(options);\n        var callbackState = {\n            state: state,\n            nonce: nonce,\n            redirectUri: encodeURIComponent(redirectUri)\n        };\n        if (options && options.prompt) {\n            callbackState.prompt = options.prompt;\n        }\n        var baseUrl;\n        if (options && options.action == \"register\") {\n            baseUrl = kc.endpoints.register();\n        } else {\n            baseUrl = kc.endpoints.authorize();\n        }\n        var scope = options && options.scope || kc.scope;\n        if (!scope) {\n            // if scope is not set, default to \"openid\"\n            scope = \"openid\";\n        } else if (scope.indexOf(\"openid\") === -1) {\n            // if openid scope is missing, prefix the given scopes with it\n            scope = \"openid \" + scope;\n        }\n        var url = baseUrl + \"?client_id=\" + encodeURIComponent(kc.clientId) + \"&redirect_uri=\" + encodeURIComponent(redirectUri) + \"&state=\" + encodeURIComponent(state) + \"&response_mode=\" + encodeURIComponent(kc.responseMode) + \"&response_type=\" + encodeURIComponent(kc.responseType) + \"&scope=\" + encodeURIComponent(scope);\n        if (useNonce) {\n            url = url + \"&nonce=\" + encodeURIComponent(nonce);\n        }\n        if (options && options.prompt) {\n            url += \"&prompt=\" + encodeURIComponent(options.prompt);\n        }\n        if (options && options.maxAge) {\n            url += \"&max_age=\" + encodeURIComponent(options.maxAge);\n        }\n        if (options && options.loginHint) {\n            url += \"&login_hint=\" + encodeURIComponent(options.loginHint);\n        }\n        if (options && options.idpHint) {\n            url += \"&kc_idp_hint=\" + encodeURIComponent(options.idpHint);\n        }\n        if (options && options.action && options.action != \"register\") {\n            url += \"&kc_action=\" + encodeURIComponent(options.action);\n        }\n        if (options && options.locale) {\n            url += \"&ui_locales=\" + encodeURIComponent(options.locale);\n        }\n        if (options && options.acr) {\n            var claimsParameter = buildClaimsParameter(options.acr);\n            url += \"&claims=\" + encodeURIComponent(claimsParameter);\n        }\n        if (options && options.acrValues || kc.acrValues) {\n            url += \"&acr_values=\" + encodeURIComponent(options.acrValues || kc.acrValues);\n        }\n        if (kc.pkceMethod) {\n            var codeVerifier = generateCodeVerifier(96);\n            callbackState.pkceCodeVerifier = codeVerifier;\n            var pkceChallenge = generatePkceChallenge(kc.pkceMethod, codeVerifier);\n            url += \"&code_challenge=\" + pkceChallenge;\n            url += \"&code_challenge_method=\" + kc.pkceMethod;\n        }\n        callbackStorage.add(callbackState);\n        return url;\n    };\n    kc.logout = function(options) {\n        return adapter.logout(options);\n    };\n    kc.createLogoutUrl = function(options) {\n        var url = kc.endpoints.logout() + \"?client_id=\" + encodeURIComponent(kc.clientId) + \"&post_logout_redirect_uri=\" + encodeURIComponent(adapter.redirectUri(options, false));\n        if (kc.idToken) {\n            url += \"&id_token_hint=\" + encodeURIComponent(kc.idToken);\n        }\n        return url;\n    };\n    kc.register = function(options) {\n        return adapter.register(options);\n    };\n    kc.createRegisterUrl = function(options) {\n        if (!options) {\n            options = {};\n        }\n        options.action = \"register\";\n        return kc.createLoginUrl(options);\n    };\n    kc.createAccountUrl = function(options) {\n        var realm = getRealmUrl();\n        var url = undefined;\n        if (typeof realm !== \"undefined\") {\n            url = realm + \"/account\" + \"?referrer=\" + encodeURIComponent(kc.clientId) + \"&referrer_uri=\" + encodeURIComponent(adapter.redirectUri(options));\n        }\n        return url;\n    };\n    kc.accountManagement = function() {\n        return adapter.accountManagement();\n    };\n    kc.hasRealmRole = function(role) {\n        var access = kc.realmAccess;\n        return !!access && access.roles.indexOf(role) >= 0;\n    };\n    kc.hasResourceRole = function(role, resource) {\n        if (!kc.resourceAccess) {\n            return false;\n        }\n        var access = kc.resourceAccess[resource || kc.clientId];\n        return !!access && access.roles.indexOf(role) >= 0;\n    };\n    kc.loadUserProfile = function() {\n        var url = getRealmUrl() + \"/account\";\n        var req = new XMLHttpRequest();\n        req.open(\"GET\", url, true);\n        req.setRequestHeader(\"Accept\", \"application/json\");\n        req.setRequestHeader(\"Authorization\", \"bearer \" + kc.token);\n        var promise = createPromise();\n        req.onreadystatechange = function() {\n            if (req.readyState == 4) {\n                if (req.status == 200) {\n                    kc.profile = JSON.parse(req.responseText);\n                    promise.setSuccess(kc.profile);\n                } else {\n                    promise.setError();\n                }\n            }\n        };\n        req.send();\n        return promise.promise;\n    };\n    kc.loadUserInfo = function() {\n        var url = kc.endpoints.userinfo();\n        var req = new XMLHttpRequest();\n        req.open(\"GET\", url, true);\n        req.setRequestHeader(\"Accept\", \"application/json\");\n        req.setRequestHeader(\"Authorization\", \"bearer \" + kc.token);\n        var promise = createPromise();\n        req.onreadystatechange = function() {\n            if (req.readyState == 4) {\n                if (req.status == 200) {\n                    kc.userInfo = JSON.parse(req.responseText);\n                    promise.setSuccess(kc.userInfo);\n                } else {\n                    promise.setError();\n                }\n            }\n        };\n        req.send();\n        return promise.promise;\n    };\n    kc.isTokenExpired = function(minValidity) {\n        if (!kc.tokenParsed || !kc.refreshToken && kc.flow != \"implicit\") {\n            throw \"Not authenticated\";\n        }\n        if (kc.timeSkew == null) {\n            logInfo(\"[KEYCLOAK] Unable to determine if token is expired as timeskew is not set\");\n            return true;\n        }\n        var expiresIn = kc.tokenParsed[\"exp\"] - Math.ceil(new Date().getTime() / 1000) + kc.timeSkew;\n        if (minValidity) {\n            if (isNaN(minValidity)) {\n                throw \"Invalid minValidity\";\n            }\n            expiresIn -= minValidity;\n        }\n        return expiresIn < 0;\n    };\n    kc.updateToken = function(minValidity) {\n        var promise = createPromise();\n        if (!kc.refreshToken) {\n            promise.setError();\n            return promise.promise;\n        }\n        minValidity = minValidity || 5;\n        var exec = function() {\n            var refreshToken = false;\n            if (minValidity == -1) {\n                refreshToken = true;\n                logInfo(\"[KEYCLOAK] Refreshing token: forced refresh\");\n            } else if (!kc.tokenParsed || kc.isTokenExpired(minValidity)) {\n                refreshToken = true;\n                logInfo(\"[KEYCLOAK] Refreshing token: token expired\");\n            }\n            if (!refreshToken) {\n                promise.setSuccess(false);\n            } else {\n                var params = \"grant_type=refresh_token&\" + \"refresh_token=\" + kc.refreshToken;\n                var url = kc.endpoints.token();\n                refreshQueue.push(promise);\n                if (refreshQueue.length == 1) {\n                    var req = new XMLHttpRequest();\n                    req.open(\"POST\", url, true);\n                    req.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n                    req.withCredentials = true;\n                    params += \"&client_id=\" + encodeURIComponent(kc.clientId);\n                    var timeLocal = new Date().getTime();\n                    req.onreadystatechange = function() {\n                        if (req.readyState == 4) {\n                            if (req.status == 200) {\n                                logInfo(\"[KEYCLOAK] Token refreshed\");\n                                timeLocal = (timeLocal + new Date().getTime()) / 2;\n                                var tokenResponse = JSON.parse(req.responseText);\n                                setToken(tokenResponse[\"access_token\"], tokenResponse[\"refresh_token\"], tokenResponse[\"id_token\"], timeLocal);\n                                kc.onAuthRefreshSuccess && kc.onAuthRefreshSuccess();\n                                for(var p = refreshQueue.pop(); p != null; p = refreshQueue.pop()){\n                                    p.setSuccess(true);\n                                }\n                            } else {\n                                logWarn(\"[KEYCLOAK] Failed to refresh token\");\n                                if (req.status == 400) {\n                                    kc.clearToken();\n                                }\n                                kc.onAuthRefreshError && kc.onAuthRefreshError();\n                                for(var p = refreshQueue.pop(); p != null; p = refreshQueue.pop()){\n                                    p.setError(true);\n                                }\n                            }\n                        }\n                    };\n                    req.send(params);\n                }\n            }\n        };\n        if (loginIframe.enable) {\n            var iframePromise = checkLoginIframe();\n            iframePromise.then(function() {\n                exec();\n            }).catch(function(error) {\n                promise.setError(error);\n            });\n        } else {\n            exec();\n        }\n        return promise.promise;\n    };\n    kc.clearToken = function() {\n        if (kc.token) {\n            setToken(null, null, null);\n            kc.onAuthLogout && kc.onAuthLogout();\n            if (kc.loginRequired) {\n                kc.login();\n            }\n        }\n    };\n    function getRealmUrl() {\n        if (typeof kc.authServerUrl !== \"undefined\") {\n            if (kc.authServerUrl.charAt(kc.authServerUrl.length - 1) == \"/\") {\n                return kc.authServerUrl + \"realms/\" + encodeURIComponent(kc.realm);\n            } else {\n                return kc.authServerUrl + \"/realms/\" + encodeURIComponent(kc.realm);\n            }\n        } else {\n            return undefined;\n        }\n    }\n    function getOrigin() {\n        if (!window.location.origin) {\n            return window.location.protocol + \"//\" + window.location.hostname + (window.location.port ? \":\" + window.location.port : \"\");\n        } else {\n            return window.location.origin;\n        }\n    }\n    function processCallback(oauth, promise) {\n        var code = oauth.code;\n        var error = oauth.error;\n        var prompt = oauth.prompt;\n        var timeLocal = new Date().getTime();\n        if (oauth[\"kc_action_status\"]) {\n            kc.onActionUpdate && kc.onActionUpdate(oauth[\"kc_action_status\"]);\n        }\n        if (error) {\n            if (prompt != \"none\") {\n                var errorData = {\n                    error: error,\n                    error_description: oauth.error_description\n                };\n                kc.onAuthError && kc.onAuthError(errorData);\n                promise && promise.setError(errorData);\n            } else {\n                promise && promise.setSuccess();\n            }\n            return;\n        } else if (kc.flow != \"standard\" && (oauth.access_token || oauth.id_token)) {\n            authSuccess(oauth.access_token, null, oauth.id_token, true);\n        }\n        if (kc.flow != \"implicit\" && code) {\n            var params = \"code=\" + code + \"&grant_type=authorization_code\";\n            var url = kc.endpoints.token();\n            var req = new XMLHttpRequest();\n            req.open(\"POST\", url, true);\n            req.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n            params += \"&client_id=\" + encodeURIComponent(kc.clientId);\n            params += \"&redirect_uri=\" + oauth.redirectUri;\n            if (oauth.pkceCodeVerifier) {\n                params += \"&code_verifier=\" + oauth.pkceCodeVerifier;\n            }\n            req.withCredentials = true;\n            req.onreadystatechange = function() {\n                if (req.readyState == 4) {\n                    if (req.status == 200) {\n                        var tokenResponse = JSON.parse(req.responseText);\n                        authSuccess(tokenResponse[\"access_token\"], tokenResponse[\"refresh_token\"], tokenResponse[\"id_token\"], kc.flow === \"standard\");\n                        scheduleCheckIframe();\n                    } else {\n                        kc.onAuthError && kc.onAuthError();\n                        promise && promise.setError();\n                    }\n                }\n            };\n            req.send(params);\n        }\n        function authSuccess(accessToken, refreshToken, idToken, fulfillPromise) {\n            timeLocal = (timeLocal + new Date().getTime()) / 2;\n            setToken(accessToken, refreshToken, idToken, timeLocal);\n            if (useNonce && (kc.tokenParsed && kc.tokenParsed.nonce != oauth.storedNonce || kc.refreshTokenParsed && kc.refreshTokenParsed.nonce != oauth.storedNonce || kc.idTokenParsed && kc.idTokenParsed.nonce != oauth.storedNonce)) {\n                logInfo(\"[KEYCLOAK] Invalid nonce, clearing token\");\n                kc.clearToken();\n                promise && promise.setError();\n            } else {\n                if (fulfillPromise) {\n                    kc.onAuthSuccess && kc.onAuthSuccess();\n                    promise && promise.setSuccess();\n                }\n            }\n        }\n    }\n    function loadConfig(url) {\n        var promise = createPromise();\n        var configUrl;\n        if (!config) {\n            configUrl = \"keycloak.json\";\n        } else if (typeof config === \"string\") {\n            configUrl = config;\n        }\n        function setupOidcEndoints(oidcConfiguration) {\n            if (!oidcConfiguration) {\n                kc.endpoints = {\n                    authorize: function() {\n                        return getRealmUrl() + \"/protocol/openid-connect/auth\";\n                    },\n                    token: function() {\n                        return getRealmUrl() + \"/protocol/openid-connect/token\";\n                    },\n                    logout: function() {\n                        return getRealmUrl() + \"/protocol/openid-connect/logout\";\n                    },\n                    checkSessionIframe: function() {\n                        var src = getRealmUrl() + \"/protocol/openid-connect/login-status-iframe.html\";\n                        if (kc.iframeVersion) {\n                            src = src + \"?version=\" + kc.iframeVersion;\n                        }\n                        return src;\n                    },\n                    thirdPartyCookiesIframe: function() {\n                        var src = getRealmUrl() + \"/protocol/openid-connect/3p-cookies/step1.html\";\n                        if (kc.iframeVersion) {\n                            src = src + \"?version=\" + kc.iframeVersion;\n                        }\n                        return src;\n                    },\n                    register: function() {\n                        return getRealmUrl() + \"/protocol/openid-connect/registrations\";\n                    },\n                    userinfo: function() {\n                        return getRealmUrl() + \"/protocol/openid-connect/userinfo\";\n                    }\n                };\n            } else {\n                kc.endpoints = {\n                    authorize: function() {\n                        return oidcConfiguration.authorization_endpoint;\n                    },\n                    token: function() {\n                        return oidcConfiguration.token_endpoint;\n                    },\n                    logout: function() {\n                        if (!oidcConfiguration.end_session_endpoint) {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                        return oidcConfiguration.end_session_endpoint;\n                    },\n                    checkSessionIframe: function() {\n                        if (!oidcConfiguration.check_session_iframe) {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                        return oidcConfiguration.check_session_iframe;\n                    },\n                    register: function() {\n                        throw 'Redirection to \"Register user\" page not supported in standard OIDC mode';\n                    },\n                    userinfo: function() {\n                        if (!oidcConfiguration.userinfo_endpoint) {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                        return oidcConfiguration.userinfo_endpoint;\n                    }\n                };\n            }\n        }\n        if (configUrl) {\n            var req = new XMLHttpRequest();\n            req.open(\"GET\", configUrl, true);\n            req.setRequestHeader(\"Accept\", \"application/json\");\n            req.onreadystatechange = function() {\n                if (req.readyState == 4) {\n                    if (req.status == 200 || fileLoaded(req)) {\n                        var config = JSON.parse(req.responseText);\n                        kc.authServerUrl = config[\"auth-server-url\"];\n                        kc.realm = config[\"realm\"];\n                        kc.clientId = config[\"resource\"];\n                        setupOidcEndoints(null);\n                        promise.setSuccess();\n                    } else {\n                        promise.setError();\n                    }\n                }\n            };\n            req.send();\n        } else {\n            if (!config.clientId) {\n                throw \"clientId missing\";\n            }\n            kc.clientId = config.clientId;\n            var oidcProvider = config[\"oidcProvider\"];\n            if (!oidcProvider) {\n                if (!config[\"url\"]) {\n                    var scripts = document.getElementsByTagName(\"script\");\n                    for(var i = 0; i < scripts.length; i++){\n                        if (scripts[i].src.match(/.*keycloak\\.js/)) {\n                            config.url = scripts[i].src.substr(0, scripts[i].src.indexOf(\"/js/keycloak.js\"));\n                            break;\n                        }\n                    }\n                }\n                if (!config.realm) {\n                    throw \"realm missing\";\n                }\n                kc.authServerUrl = config.url;\n                kc.realm = config.realm;\n                setupOidcEndoints(null);\n                promise.setSuccess();\n            } else {\n                if (typeof oidcProvider === \"string\") {\n                    var oidcProviderConfigUrl;\n                    if (oidcProvider.charAt(oidcProvider.length - 1) == \"/\") {\n                        oidcProviderConfigUrl = oidcProvider + \".well-known/openid-configuration\";\n                    } else {\n                        oidcProviderConfigUrl = oidcProvider + \"/.well-known/openid-configuration\";\n                    }\n                    var req = new XMLHttpRequest();\n                    req.open(\"GET\", oidcProviderConfigUrl, true);\n                    req.setRequestHeader(\"Accept\", \"application/json\");\n                    req.onreadystatechange = function() {\n                        if (req.readyState == 4) {\n                            if (req.status == 200 || fileLoaded(req)) {\n                                var oidcProviderConfig = JSON.parse(req.responseText);\n                                setupOidcEndoints(oidcProviderConfig);\n                                promise.setSuccess();\n                            } else {\n                                promise.setError();\n                            }\n                        }\n                    };\n                    req.send();\n                } else {\n                    setupOidcEndoints(oidcProvider);\n                    promise.setSuccess();\n                }\n            }\n        }\n        return promise.promise;\n    }\n    function fileLoaded(xhr) {\n        return xhr.status == 0 && xhr.responseText && xhr.responseURL.startsWith(\"file:\");\n    }\n    function setToken(token, refreshToken, idToken, timeLocal) {\n        if (kc.tokenTimeoutHandle) {\n            clearTimeout(kc.tokenTimeoutHandle);\n            kc.tokenTimeoutHandle = null;\n        }\n        if (refreshToken) {\n            kc.refreshToken = refreshToken;\n            kc.refreshTokenParsed = (0,jwt_decode__WEBPACK_IMPORTED_MODULE_2__.jwtDecode)(refreshToken);\n        } else {\n            delete kc.refreshToken;\n            delete kc.refreshTokenParsed;\n        }\n        if (idToken) {\n            kc.idToken = idToken;\n            kc.idTokenParsed = (0,jwt_decode__WEBPACK_IMPORTED_MODULE_2__.jwtDecode)(idToken);\n        } else {\n            delete kc.idToken;\n            delete kc.idTokenParsed;\n        }\n        if (token) {\n            kc.token = token;\n            kc.tokenParsed = (0,jwt_decode__WEBPACK_IMPORTED_MODULE_2__.jwtDecode)(token);\n            kc.sessionId = kc.tokenParsed.session_state;\n            kc.authenticated = true;\n            kc.subject = kc.tokenParsed.sub;\n            kc.realmAccess = kc.tokenParsed.realm_access;\n            kc.resourceAccess = kc.tokenParsed.resource_access;\n            if (timeLocal) {\n                kc.timeSkew = Math.floor(timeLocal / 1000) - kc.tokenParsed.iat;\n            }\n            if (kc.timeSkew != null) {\n                logInfo(\"[KEYCLOAK] Estimated time difference between browser and server is \" + kc.timeSkew + \" seconds\");\n                if (kc.onTokenExpired) {\n                    var expiresIn = (kc.tokenParsed[\"exp\"] - new Date().getTime() / 1000 + kc.timeSkew) * 1000;\n                    logInfo(\"[KEYCLOAK] Token expires in \" + Math.round(expiresIn / 1000) + \" s\");\n                    if (expiresIn <= 0) {\n                        kc.onTokenExpired();\n                    } else {\n                        kc.tokenTimeoutHandle = setTimeout(kc.onTokenExpired, expiresIn);\n                    }\n                }\n            }\n        } else {\n            delete kc.token;\n            delete kc.tokenParsed;\n            delete kc.subject;\n            delete kc.realmAccess;\n            delete kc.resourceAccess;\n            kc.authenticated = false;\n        }\n    }\n    function createUUID() {\n        var hexDigits = \"0123456789abcdef\";\n        var s = generateRandomString(36, hexDigits).split(\"\");\n        s[14] = \"4\";\n        s[19] = hexDigits.substr(s[19] & 0x3 | 0x8, 1);\n        s[8] = s[13] = s[18] = s[23] = \"-\";\n        var uuid = s.join(\"\");\n        return uuid;\n    }\n    function parseCallback(url) {\n        var oauth = parseCallbackUrl(url);\n        if (!oauth) {\n            return;\n        }\n        var oauthState = callbackStorage.get(oauth.state);\n        if (oauthState) {\n            oauth.valid = true;\n            oauth.redirectUri = oauthState.redirectUri;\n            oauth.storedNonce = oauthState.nonce;\n            oauth.prompt = oauthState.prompt;\n            oauth.pkceCodeVerifier = oauthState.pkceCodeVerifier;\n        }\n        return oauth;\n    }\n    function parseCallbackUrl(url) {\n        var supportedParams;\n        switch(kc.flow){\n            case \"standard\":\n                supportedParams = [\n                    \"code\",\n                    \"state\",\n                    \"session_state\",\n                    \"kc_action_status\",\n                    \"iss\"\n                ];\n                break;\n            case \"implicit\":\n                supportedParams = [\n                    \"access_token\",\n                    \"token_type\",\n                    \"id_token\",\n                    \"state\",\n                    \"session_state\",\n                    \"expires_in\",\n                    \"kc_action_status\",\n                    \"iss\"\n                ];\n                break;\n            case \"hybrid\":\n                supportedParams = [\n                    \"access_token\",\n                    \"token_type\",\n                    \"id_token\",\n                    \"code\",\n                    \"state\",\n                    \"session_state\",\n                    \"expires_in\",\n                    \"kc_action_status\",\n                    \"iss\"\n                ];\n                break;\n        }\n        supportedParams.push(\"error\");\n        supportedParams.push(\"error_description\");\n        supportedParams.push(\"error_uri\");\n        var queryIndex = url.indexOf(\"?\");\n        var fragmentIndex = url.indexOf(\"#\");\n        var newUrl;\n        var parsed;\n        if (kc.responseMode === \"query\" && queryIndex !== -1) {\n            newUrl = url.substring(0, queryIndex);\n            parsed = parseCallbackParams(url.substring(queryIndex + 1, fragmentIndex !== -1 ? fragmentIndex : url.length), supportedParams);\n            if (parsed.paramsString !== \"\") {\n                newUrl += \"?\" + parsed.paramsString;\n            }\n            if (fragmentIndex !== -1) {\n                newUrl += url.substring(fragmentIndex);\n            }\n        } else if (kc.responseMode === \"fragment\" && fragmentIndex !== -1) {\n            newUrl = url.substring(0, fragmentIndex);\n            parsed = parseCallbackParams(url.substring(fragmentIndex + 1), supportedParams);\n            if (parsed.paramsString !== \"\") {\n                newUrl += \"#\" + parsed.paramsString;\n            }\n        }\n        if (parsed && parsed.oauthParams) {\n            if (kc.flow === \"standard\" || kc.flow === \"hybrid\") {\n                if ((parsed.oauthParams.code || parsed.oauthParams.error) && parsed.oauthParams.state) {\n                    parsed.oauthParams.newUrl = newUrl;\n                    return parsed.oauthParams;\n                }\n            } else if (kc.flow === \"implicit\") {\n                if ((parsed.oauthParams.access_token || parsed.oauthParams.error) && parsed.oauthParams.state) {\n                    parsed.oauthParams.newUrl = newUrl;\n                    return parsed.oauthParams;\n                }\n            }\n        }\n    }\n    function parseCallbackParams(paramsString, supportedParams) {\n        var p = paramsString.split(\"&\");\n        var result = {\n            paramsString: \"\",\n            oauthParams: {}\n        };\n        for(var i = 0; i < p.length; i++){\n            var split = p[i].indexOf(\"=\");\n            var key = p[i].slice(0, split);\n            if (supportedParams.indexOf(key) !== -1) {\n                result.oauthParams[key] = p[i].slice(split + 1);\n            } else {\n                if (result.paramsString !== \"\") {\n                    result.paramsString += \"&\";\n                }\n                result.paramsString += p[i];\n            }\n        }\n        return result;\n    }\n    function createPromise() {\n        // Need to create a native Promise which also preserves the\n        // interface of the custom promise type previously used by the API\n        var p = {\n            setSuccess: function(result) {\n                p.resolve(result);\n            },\n            setError: function(result) {\n                p.reject(result);\n            }\n        };\n        p.promise = new Promise(function(resolve, reject) {\n            p.resolve = resolve;\n            p.reject = reject;\n        });\n        return p;\n    }\n    // Function to extend existing native Promise with timeout\n    function applyTimeoutToPromise(promise, timeout, errorMessage) {\n        var timeoutHandle = null;\n        var timeoutPromise = new Promise(function(resolve, reject) {\n            timeoutHandle = setTimeout(function() {\n                reject({\n                    \"error\": errorMessage || \"Promise is not settled within timeout of \" + timeout + \"ms\"\n                });\n            }, timeout);\n        });\n        return Promise.race([\n            promise,\n            timeoutPromise\n        ]).finally(function() {\n            clearTimeout(timeoutHandle);\n        });\n    }\n    function setupCheckLoginIframe() {\n        var promise = createPromise();\n        if (!loginIframe.enable) {\n            promise.setSuccess();\n            return promise.promise;\n        }\n        if (loginIframe.iframe) {\n            promise.setSuccess();\n            return promise.promise;\n        }\n        var iframe = document.createElement(\"iframe\");\n        loginIframe.iframe = iframe;\n        iframe.onload = function() {\n            var authUrl = kc.endpoints.authorize();\n            if (authUrl.charAt(0) === \"/\") {\n                loginIframe.iframeOrigin = getOrigin();\n            } else {\n                loginIframe.iframeOrigin = authUrl.substring(0, authUrl.indexOf(\"/\", 8));\n            }\n            promise.setSuccess();\n        };\n        var src = kc.endpoints.checkSessionIframe();\n        iframe.setAttribute(\"src\", src);\n        iframe.setAttribute(\"sandbox\", \"allow-storage-access-by-user-activation allow-scripts allow-same-origin\");\n        iframe.setAttribute(\"title\", \"keycloak-session-iframe\");\n        iframe.style.display = \"none\";\n        document.body.appendChild(iframe);\n        var messageCallback = function(event) {\n            if (event.origin !== loginIframe.iframeOrigin || loginIframe.iframe.contentWindow !== event.source) {\n                return;\n            }\n            if (!(event.data == \"unchanged\" || event.data == \"changed\" || event.data == \"error\")) {\n                return;\n            }\n            if (event.data != \"unchanged\") {\n                kc.clearToken();\n            }\n            var callbacks = loginIframe.callbackList.splice(0, loginIframe.callbackList.length);\n            for(var i = callbacks.length - 1; i >= 0; --i){\n                var promise = callbacks[i];\n                if (event.data == \"error\") {\n                    promise.setError();\n                } else {\n                    promise.setSuccess(event.data == \"unchanged\");\n                }\n            }\n        };\n        window.addEventListener(\"message\", messageCallback, false);\n        return promise.promise;\n    }\n    function scheduleCheckIframe() {\n        if (loginIframe.enable) {\n            if (kc.token) {\n                setTimeout(function() {\n                    checkLoginIframe().then(function(unchanged) {\n                        if (unchanged) {\n                            scheduleCheckIframe();\n                        }\n                    });\n                }, loginIframe.interval * 1000);\n            }\n        }\n    }\n    function checkLoginIframe() {\n        var promise = createPromise();\n        if (loginIframe.iframe && loginIframe.iframeOrigin) {\n            var msg = kc.clientId + \" \" + (kc.sessionId ? kc.sessionId : \"\");\n            loginIframe.callbackList.push(promise);\n            var origin = loginIframe.iframeOrigin;\n            if (loginIframe.callbackList.length == 1) {\n                loginIframe.iframe.contentWindow.postMessage(msg, origin);\n            }\n        } else {\n            promise.setSuccess();\n        }\n        return promise.promise;\n    }\n    function check3pCookiesSupported() {\n        var promise = createPromise();\n        if (loginIframe.enable || kc.silentCheckSsoRedirectUri) {\n            var iframe = document.createElement(\"iframe\");\n            iframe.setAttribute(\"src\", kc.endpoints.thirdPartyCookiesIframe());\n            iframe.setAttribute(\"sandbox\", \"allow-storage-access-by-user-activation allow-scripts allow-same-origin\");\n            iframe.setAttribute(\"title\", \"keycloak-3p-check-iframe\");\n            iframe.style.display = \"none\";\n            document.body.appendChild(iframe);\n            var messageCallback = function(event) {\n                if (iframe.contentWindow !== event.source) {\n                    return;\n                }\n                if (event.data !== \"supported\" && event.data !== \"unsupported\") {\n                    return;\n                } else if (event.data === \"unsupported\") {\n                    logWarn(\"[KEYCLOAK] Your browser is blocking access to 3rd-party cookies, this means:\\n\\n\" + \" - It is not possible to retrieve tokens without redirecting to the Keycloak server (a.k.a. no support for silent authentication).\\n\" + \" - It is not possible to automatically detect changes to the session status (such as the user logging out in another tab).\\n\\n\" + \"For more information see: https://www.keycloak.org/docs/latest/securing_apps/#_modern_browsers\");\n                    loginIframe.enable = false;\n                    if (kc.silentCheckSsoFallback) {\n                        kc.silentCheckSsoRedirectUri = false;\n                    }\n                }\n                document.body.removeChild(iframe);\n                window.removeEventListener(\"message\", messageCallback);\n                promise.setSuccess();\n            };\n            window.addEventListener(\"message\", messageCallback, false);\n        } else {\n            promise.setSuccess();\n        }\n        return applyTimeoutToPromise(promise.promise, kc.messageReceiveTimeout, \"Timeout when waiting for 3rd party check iframe message.\");\n    }\n    function loadAdapter(type) {\n        if (!type || type == \"default\") {\n            return {\n                login: function(options) {\n                    window.location.assign(kc.createLoginUrl(options));\n                    return createPromise().promise;\n                },\n                logout: function(options) {\n                    window.location.replace(kc.createLogoutUrl(options));\n                    return createPromise().promise;\n                },\n                register: function(options) {\n                    window.location.assign(kc.createRegisterUrl(options));\n                    return createPromise().promise;\n                },\n                accountManagement: function() {\n                    var accountUrl = kc.createAccountUrl();\n                    if (typeof accountUrl !== \"undefined\") {\n                        window.location.href = accountUrl;\n                    } else {\n                        throw \"Not supported by the OIDC server\";\n                    }\n                    return createPromise().promise;\n                },\n                redirectUri: function(options, encodeHash) {\n                    if (options && options.redirectUri) {\n                        return options.redirectUri;\n                    } else if (kc.redirectUri) {\n                        return kc.redirectUri;\n                    } else {\n                        return location.href;\n                    }\n                }\n            };\n        }\n        if (type == \"cordova\") {\n            loginIframe.enable = false;\n            var cordovaOpenWindowWrapper = function(loginUrl, target, options) {\n                if (window.cordova && window.cordova.InAppBrowser) {\n                    // Use inappbrowser for IOS and Android if available\n                    return window.cordova.InAppBrowser.open(loginUrl, target, options);\n                } else {\n                    return window.open(loginUrl, target, options);\n                }\n            };\n            var shallowCloneCordovaOptions = function(userOptions) {\n                if (userOptions && userOptions.cordovaOptions) {\n                    return Object.keys(userOptions.cordovaOptions).reduce(function(options, optionName) {\n                        options[optionName] = userOptions.cordovaOptions[optionName];\n                        return options;\n                    }, {});\n                } else {\n                    return {};\n                }\n            };\n            var formatCordovaOptions = function(cordovaOptions) {\n                return Object.keys(cordovaOptions).reduce(function(options, optionName) {\n                    options.push(optionName + \"=\" + cordovaOptions[optionName]);\n                    return options;\n                }, []).join(\",\");\n            };\n            var createCordovaOptions = function(userOptions) {\n                var cordovaOptions = shallowCloneCordovaOptions(userOptions);\n                cordovaOptions.location = \"no\";\n                if (userOptions && userOptions.prompt == \"none\") {\n                    cordovaOptions.hidden = \"yes\";\n                }\n                return formatCordovaOptions(cordovaOptions);\n            };\n            var getCordovaRedirectUri = function() {\n                return kc.redirectUri || \"http://localhost\";\n            };\n            return {\n                login: function(options) {\n                    var promise = createPromise();\n                    var cordovaOptions = createCordovaOptions(options);\n                    var loginUrl = kc.createLoginUrl(options);\n                    var ref = cordovaOpenWindowWrapper(loginUrl, \"_blank\", cordovaOptions);\n                    var completed = false;\n                    var closed = false;\n                    var closeBrowser = function() {\n                        closed = true;\n                        ref.close();\n                    };\n                    ref.addEventListener(\"loadstart\", function(event) {\n                        if (event.url.indexOf(getCordovaRedirectUri()) == 0) {\n                            var callback = parseCallback(event.url);\n                            processCallback(callback, promise);\n                            closeBrowser();\n                            completed = true;\n                        }\n                    });\n                    ref.addEventListener(\"loaderror\", function(event) {\n                        if (!completed) {\n                            if (event.url.indexOf(getCordovaRedirectUri()) == 0) {\n                                var callback = parseCallback(event.url);\n                                processCallback(callback, promise);\n                                closeBrowser();\n                                completed = true;\n                            } else {\n                                promise.setError();\n                                closeBrowser();\n                            }\n                        }\n                    });\n                    ref.addEventListener(\"exit\", function(event) {\n                        if (!closed) {\n                            promise.setError({\n                                reason: \"closed_by_user\"\n                            });\n                        }\n                    });\n                    return promise.promise;\n                },\n                logout: function(options) {\n                    var promise = createPromise();\n                    var logoutUrl = kc.createLogoutUrl(options);\n                    var ref = cordovaOpenWindowWrapper(logoutUrl, \"_blank\", \"location=no,hidden=yes,clearcache=yes\");\n                    var error;\n                    ref.addEventListener(\"loadstart\", function(event) {\n                        if (event.url.indexOf(getCordovaRedirectUri()) == 0) {\n                            ref.close();\n                        }\n                    });\n                    ref.addEventListener(\"loaderror\", function(event) {\n                        if (event.url.indexOf(getCordovaRedirectUri()) == 0) {\n                            ref.close();\n                        } else {\n                            error = true;\n                            ref.close();\n                        }\n                    });\n                    ref.addEventListener(\"exit\", function(event) {\n                        if (error) {\n                            promise.setError();\n                        } else {\n                            kc.clearToken();\n                            promise.setSuccess();\n                        }\n                    });\n                    return promise.promise;\n                },\n                register: function(options) {\n                    var promise = createPromise();\n                    var registerUrl = kc.createRegisterUrl();\n                    var cordovaOptions = createCordovaOptions(options);\n                    var ref = cordovaOpenWindowWrapper(registerUrl, \"_blank\", cordovaOptions);\n                    ref.addEventListener(\"loadstart\", function(event) {\n                        if (event.url.indexOf(getCordovaRedirectUri()) == 0) {\n                            ref.close();\n                            var oauth = parseCallback(event.url);\n                            processCallback(oauth, promise);\n                        }\n                    });\n                    return promise.promise;\n                },\n                accountManagement: function() {\n                    var accountUrl = kc.createAccountUrl();\n                    if (typeof accountUrl !== \"undefined\") {\n                        var ref = cordovaOpenWindowWrapper(accountUrl, \"_blank\", \"location=no\");\n                        ref.addEventListener(\"loadstart\", function(event) {\n                            if (event.url.indexOf(getCordovaRedirectUri()) == 0) {\n                                ref.close();\n                            }\n                        });\n                    } else {\n                        throw \"Not supported by the OIDC server\";\n                    }\n                },\n                redirectUri: function(options) {\n                    return getCordovaRedirectUri();\n                }\n            };\n        }\n        if (type == \"cordova-native\") {\n            loginIframe.enable = false;\n            return {\n                login: function(options) {\n                    var promise = createPromise();\n                    var loginUrl = kc.createLoginUrl(options);\n                    universalLinks.subscribe(\"keycloak\", function(event) {\n                        universalLinks.unsubscribe(\"keycloak\");\n                        window.cordova.plugins.browsertab.close();\n                        var oauth = parseCallback(event.url);\n                        processCallback(oauth, promise);\n                    });\n                    window.cordova.plugins.browsertab.openUrl(loginUrl);\n                    return promise.promise;\n                },\n                logout: function(options) {\n                    var promise = createPromise();\n                    var logoutUrl = kc.createLogoutUrl(options);\n                    universalLinks.subscribe(\"keycloak\", function(event) {\n                        universalLinks.unsubscribe(\"keycloak\");\n                        window.cordova.plugins.browsertab.close();\n                        kc.clearToken();\n                        promise.setSuccess();\n                    });\n                    window.cordova.plugins.browsertab.openUrl(logoutUrl);\n                    return promise.promise;\n                },\n                register: function(options) {\n                    var promise = createPromise();\n                    var registerUrl = kc.createRegisterUrl(options);\n                    universalLinks.subscribe(\"keycloak\", function(event) {\n                        universalLinks.unsubscribe(\"keycloak\");\n                        window.cordova.plugins.browsertab.close();\n                        var oauth = parseCallback(event.url);\n                        processCallback(oauth, promise);\n                    });\n                    window.cordova.plugins.browsertab.openUrl(registerUrl);\n                    return promise.promise;\n                },\n                accountManagement: function() {\n                    var accountUrl = kc.createAccountUrl();\n                    if (typeof accountUrl !== \"undefined\") {\n                        window.cordova.plugins.browsertab.openUrl(accountUrl);\n                    } else {\n                        throw \"Not supported by the OIDC server\";\n                    }\n                },\n                redirectUri: function(options) {\n                    if (options && options.redirectUri) {\n                        return options.redirectUri;\n                    } else if (kc.redirectUri) {\n                        return kc.redirectUri;\n                    } else {\n                        return \"http://localhost\";\n                    }\n                }\n            };\n        }\n        throw \"invalid adapter type: \" + type;\n    }\n    var LocalStorage = function() {\n        if (!(this instanceof LocalStorage)) {\n            return new LocalStorage();\n        }\n        localStorage.setItem(\"kc-test\", \"test\");\n        localStorage.removeItem(\"kc-test\");\n        var cs = this;\n        function clearExpired() {\n            var time = new Date().getTime();\n            for(var i = 0; i < localStorage.length; i++){\n                var key = localStorage.key(i);\n                if (key && key.indexOf(\"kc-callback-\") == 0) {\n                    var value = localStorage.getItem(key);\n                    if (value) {\n                        try {\n                            var expires = JSON.parse(value).expires;\n                            if (!expires || expires < time) {\n                                localStorage.removeItem(key);\n                            }\n                        } catch (err) {\n                            localStorage.removeItem(key);\n                        }\n                    }\n                }\n            }\n        }\n        cs.get = function(state) {\n            if (!state) {\n                return;\n            }\n            var key = \"kc-callback-\" + state;\n            var value = localStorage.getItem(key);\n            if (value) {\n                localStorage.removeItem(key);\n                value = JSON.parse(value);\n            }\n            clearExpired();\n            return value;\n        };\n        cs.add = function(state) {\n            clearExpired();\n            var key = \"kc-callback-\" + state.state;\n            state.expires = new Date().getTime() + 60 * 60 * 1000;\n            localStorage.setItem(key, JSON.stringify(state));\n        };\n    };\n    var CookieStorage = function() {\n        if (!(this instanceof CookieStorage)) {\n            return new CookieStorage();\n        }\n        var cs = this;\n        cs.get = function(state) {\n            if (!state) {\n                return;\n            }\n            var value = getCookie(\"kc-callback-\" + state);\n            setCookie(\"kc-callback-\" + state, \"\", cookieExpiration(-100));\n            if (value) {\n                return JSON.parse(value);\n            }\n        };\n        cs.add = function(state) {\n            setCookie(\"kc-callback-\" + state.state, JSON.stringify(state), cookieExpiration(60));\n        };\n        cs.removeItem = function(key) {\n            setCookie(key, \"\", cookieExpiration(-100));\n        };\n        var cookieExpiration = function(minutes) {\n            var exp = new Date();\n            exp.setTime(exp.getTime() + minutes * 60 * 1000);\n            return exp;\n        };\n        var getCookie = function(key) {\n            var name = key + \"=\";\n            var ca = document.cookie.split(\";\");\n            for(var i = 0; i < ca.length; i++){\n                var c = ca[i];\n                while(c.charAt(0) == \" \"){\n                    c = c.substring(1);\n                }\n                if (c.indexOf(name) == 0) {\n                    return c.substring(name.length, c.length);\n                }\n            }\n            return \"\";\n        };\n        var setCookie = function(key, value, expirationDate) {\n            var cookie = key + \"=\" + value + \"; \" + \"expires=\" + expirationDate.toUTCString() + \"; \";\n            document.cookie = cookie;\n        };\n    };\n    function createCallbackStorage() {\n        try {\n            return new LocalStorage();\n        } catch (err) {}\n        return new CookieStorage();\n    }\n    function createLogger(fn) {\n        return function() {\n            if (kc.enableLogging) {\n                fn.apply(console, Array.prototype.slice.call(arguments));\n            }\n        };\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMva2V5Y2xvYWstanMvZGlzdC9rZXljbG9hay5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErQjtBQUNBO0FBQ1E7QUFFdkM7Ozs7Ozs7Ozs7Ozs7OztDQWVDLEdBRUQsSUFBSSxPQUFPRyxZQUFZLGFBQWE7SUFDaEMsTUFBTUMsTUFBTTtBQUNoQjtBQUVBLFNBQVNDLFNBQVVDLE1BQU07SUFDckIsSUFBSSxDQUFFLEtBQUksWUFBWUQsUUFBTyxHQUFJO1FBQzdCLE1BQU0sSUFBSUQsTUFBTTtJQUNwQjtJQUVBLElBQUlHLEtBQUssSUFBSTtJQUNiLElBQUlDO0lBQ0osSUFBSUMsZUFBZSxFQUFFO0lBQ3JCLElBQUlDO0lBRUosSUFBSUMsY0FBYztRQUNkQyxRQUFRO1FBQ1JDLGNBQWMsRUFBRTtRQUNoQkMsVUFBVTtJQUNkO0lBRUEsSUFBSUMsVUFBVUMsU0FBU0Msb0JBQW9CLENBQUM7SUFDNUMsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlILFFBQVFJLE1BQU0sRUFBRUQsSUFBSztRQUNyQyxJQUFJLENBQUNILE9BQU8sQ0FBQ0csRUFBRSxDQUFDRSxHQUFHLENBQUNDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLTixPQUFPLENBQUNHLEVBQUUsQ0FBQ0UsR0FBRyxDQUFDQyxPQUFPLENBQUMsdUJBQXVCLENBQUMsTUFBTU4sT0FBTyxDQUFDRyxFQUFFLENBQUNFLEdBQUcsQ0FBQ0MsT0FBTyxDQUFDLGdCQUFnQixDQUFDLEdBQUc7WUFDakpkLEdBQUdlLGFBQWEsR0FBR1AsT0FBTyxDQUFDRyxFQUFFLENBQUNFLEdBQUcsQ0FBQ0csU0FBUyxDQUFDUixPQUFPLENBQUNHLEVBQUUsQ0FBQ0UsR0FBRyxDQUFDQyxPQUFPLENBQUMsY0FBYyxHQUFHRyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDckc7SUFDSjtJQUVBLElBQUlDLFdBQVc7SUFDZixJQUFJQyxVQUFVQyxhQUFhQyxRQUFRQyxJQUFJO0lBQ3ZDLElB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LEVBQUU7UUFDcEIsT0FBTztZQUNILElBQUlsVyxHQUFHK0MsYUFBYSxFQUFFO2dCQUNsQm1ULEdBQUcvTixLQUFLLENBQUM5RyxTQUFTaUcsTUFBTTZPLFNBQVMsQ0FBQzVFLEtBQUssQ0FBQzZFLElBQUksQ0FBQ0M7WUFDakQ7UUFDSjtJQUNKO0FBQ0o7QUFFK0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AbWljcm9zZXJ2aWNlcy9wdWJsaWMtd2ViLy4vbm9kZV9tb2R1bGVzL2tleWNsb2FrLWpzL2Rpc3Qva2V5Y2xvYWsubWpzP2ZkMWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJhc2U2NCBmcm9tICdiYXNlNjQtanMnO1xuaW1wb3J0IHNoYTI1NiBmcm9tICdqcy1zaGEyNTYnO1xuaW1wb3J0IHsgand0RGVjb2RlIH0gZnJvbSAnand0LWRlY29kZSc7XG5cbi8qXG4gKiBDb3B5cmlnaHQgMjAxNiBSZWQgSGF0LCBJbmMuIGFuZC9vciBpdHMgYWZmaWxpYXRlc1xuICogYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyBhcyBpbmRpY2F0ZWQgYnkgdGhlIEBhdXRob3IgdGFncy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pZiAodHlwZW9mIFByb21pc2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdGhyb3cgRXJyb3IoJ0tleWNsb2FrIHJlcXVpcmVzIGFuIGVudmlyb25tZW50IHRoYXQgc3VwcG9ydHMgUHJvbWlzZXMuIE1ha2Ugc3VyZSB0aGF0IHlvdSBpbmNsdWRlIHRoZSBhcHByb3ByaWF0ZSBwb2x5ZmlsbC4nKTtcbn1cblxuZnVuY3Rpb24gS2V5Y2xvYWsgKGNvbmZpZykge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBLZXljbG9haykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlICdLZXljbG9haycgY29uc3RydWN0b3IgbXVzdCBiZSBpbnZva2VkIHdpdGggJ25ldycuXCIpXG4gICAgfVxuXG4gICAgdmFyIGtjID0gdGhpcztcbiAgICB2YXIgYWRhcHRlcjtcbiAgICB2YXIgcmVmcmVzaFF1ZXVlID0gW107XG4gICAgdmFyIGNhbGxiYWNrU3RvcmFnZTtcblxuICAgIHZhciBsb2dpbklmcmFtZSA9IHtcbiAgICAgICAgZW5hYmxlOiB0cnVlLFxuICAgICAgICBjYWxsYmFja0xpc3Q6IFtdLFxuICAgICAgICBpbnRlcnZhbDogNVxuICAgIH07XG5cbiAgICB2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjcmlwdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKChzY3JpcHRzW2ldLnNyYy5pbmRleE9mKCdrZXljbG9hay5qcycpICE9PSAtMSB8fCBzY3JpcHRzW2ldLnNyYy5pbmRleE9mKCdrZXljbG9hay5taW4uanMnKSAhPT0gLTEpICYmIHNjcmlwdHNbaV0uc3JjLmluZGV4T2YoJ3ZlcnNpb249JykgIT09IC0xKSB7XG4gICAgICAgICAgICBrYy5pZnJhbWVWZXJzaW9uID0gc2NyaXB0c1tpXS5zcmMuc3Vic3RyaW5nKHNjcmlwdHNbaV0uc3JjLmluZGV4T2YoJ3ZlcnNpb249JykgKyA4KS5zcGxpdCgnJicpWzBdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHVzZU5vbmNlID0gdHJ1ZTtcbiAgICB2YXIgbG9nSW5mbyA9IGNyZWF0ZUxvZ2dlcihjb25zb2xlLmluZm8pO1xuICAgIHZhciBsb2dXYXJuID0gY3JlYXRlTG9nZ2VyKGNvbnNvbGUud2Fybik7XG5cbiAgICBrYy5pbml0ID0gZnVuY3Rpb24gKGluaXRPcHRpb25zKSB7XG4gICAgICAgIGlmIChrYy5kaWRJbml0aWFsaXplKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBICdLZXljbG9haycgaW5zdGFuY2UgY2FuIG9ubHkgYmUgaW5pdGlhbGl6ZWQgb25jZS5cIik7XG4gICAgICAgIH1cblxuICAgICAgICBrYy5kaWRJbml0aWFsaXplID0gdHJ1ZTtcblxuICAgICAgICBrYy5hdXRoZW50aWNhdGVkID0gZmFsc2U7XG5cbiAgICAgICAgY2FsbGJhY2tTdG9yYWdlID0gY3JlYXRlQ2FsbGJhY2tTdG9yYWdlKCk7XG4gICAgICAgIHZhciBhZGFwdGVycyA9IFsnZGVmYXVsdCcsICdjb3Jkb3ZhJywgJ2NvcmRvdmEtbmF0aXZlJ107XG5cbiAgICAgICAgaWYgKGluaXRPcHRpb25zICYmIGFkYXB0ZXJzLmluZGV4T2YoaW5pdE9wdGlvbnMuYWRhcHRlcikgPiAtMSkge1xuICAgICAgICAgICAgYWRhcHRlciA9IGxvYWRBZGFwdGVyKGluaXRPcHRpb25zLmFkYXB0ZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKGluaXRPcHRpb25zICYmIHR5cGVvZiBpbml0T3B0aW9ucy5hZGFwdGVyID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBhZGFwdGVyID0gaW5pdE9wdGlvbnMuYWRhcHRlcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuQ29yZG92YSB8fCB3aW5kb3cuY29yZG92YSkge1xuICAgICAgICAgICAgICAgIGFkYXB0ZXIgPSBsb2FkQWRhcHRlcignY29yZG92YScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhZGFwdGVyID0gbG9hZEFkYXB0ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbml0T3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbml0T3B0aW9ucy51c2VOb25jZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB1c2VOb25jZSA9IGluaXRPcHRpb25zLnVzZU5vbmNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGluaXRPcHRpb25zLmNoZWNrTG9naW5JZnJhbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgbG9naW5JZnJhbWUuZW5hYmxlID0gaW5pdE9wdGlvbnMuY2hlY2tMb2dpbklmcmFtZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGluaXRPcHRpb25zLmNoZWNrTG9naW5JZnJhbWVJbnRlcnZhbCkge1xuICAgICAgICAgICAgICAgIGxvZ2luSWZyYW1lLmludGVydmFsID0gaW5pdE9wdGlvbnMuY2hlY2tMb2dpbklmcmFtZUludGVydmFsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaW5pdE9wdGlvbnMub25Mb2FkID09PSAnbG9naW4tcmVxdWlyZWQnKSB7XG4gICAgICAgICAgICAgICAga2MubG9naW5SZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbml0T3B0aW9ucy5yZXNwb25zZU1vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5pdE9wdGlvbnMucmVzcG9uc2VNb2RlID09PSAncXVlcnknIHx8IGluaXRPcHRpb25zLnJlc3BvbnNlTW9kZSA9PT0gJ2ZyYWdtZW50Jykge1xuICAgICAgICAgICAgICAgICAgICBrYy5yZXNwb25zZU1vZGUgPSBpbml0T3B0aW9ucy5yZXNwb25zZU1vZGU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ0ludmFsaWQgdmFsdWUgZm9yIHJlc3BvbnNlTW9kZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaW5pdE9wdGlvbnMuZmxvdykge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoaW5pdE9wdGlvbnMuZmxvdykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzdGFuZGFyZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBrYy5yZXNwb25zZVR5cGUgPSAnY29kZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW1wbGljaXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAga2MucmVzcG9uc2VUeXBlID0gJ2lkX3Rva2VuIHRva2VuJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdoeWJyaWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAga2MucmVzcG9uc2VUeXBlID0gJ2NvZGUgaWRfdG9rZW4gdG9rZW4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAnSW52YWxpZCB2YWx1ZSBmb3IgZmxvdyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGtjLmZsb3cgPSBpbml0T3B0aW9ucy5mbG93O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaW5pdE9wdGlvbnMudGltZVNrZXcgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGtjLnRpbWVTa2V3ID0gaW5pdE9wdGlvbnMudGltZVNrZXc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGluaXRPcHRpb25zLnJlZGlyZWN0VXJpKSB7XG4gICAgICAgICAgICAgICAga2MucmVkaXJlY3RVcmkgPSBpbml0T3B0aW9ucy5yZWRpcmVjdFVyaTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGluaXRPcHRpb25zLnNpbGVudENoZWNrU3NvUmVkaXJlY3RVcmkpIHtcbiAgICAgICAgICAgICAgICBrYy5zaWxlbnRDaGVja1Nzb1JlZGlyZWN0VXJpID0gaW5pdE9wdGlvbnMuc2lsZW50Q2hlY2tTc29SZWRpcmVjdFVyaTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbml0T3B0aW9ucy5zaWxlbnRDaGVja1Nzb0ZhbGxiYWNrID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICBrYy5zaWxlbnRDaGVja1Nzb0ZhbGxiYWNrID0gaW5pdE9wdGlvbnMuc2lsZW50Q2hlY2tTc29GYWxsYmFjaztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAga2Muc2lsZW50Q2hlY2tTc29GYWxsYmFjayA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbml0T3B0aW9ucy5wa2NlTWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluaXRPcHRpb25zLnBrY2VNZXRob2QgIT09IFwiUzI1NlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93ICdJbnZhbGlkIHZhbHVlIGZvciBwa2NlTWV0aG9kJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAga2MucGtjZU1ldGhvZCA9IGluaXRPcHRpb25zLnBrY2VNZXRob2Q7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5pdE9wdGlvbnMuZW5hYmxlTG9nZ2luZyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAga2MuZW5hYmxlTG9nZ2luZyA9IGluaXRPcHRpb25zLmVuYWJsZUxvZ2dpbmc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGtjLmVuYWJsZUxvZ2dpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbml0T3B0aW9ucy5zY29wZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBrYy5zY29wZSA9IGluaXRPcHRpb25zLnNjb3BlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGluaXRPcHRpb25zLmFjclZhbHVlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBrYy5hY3JWYWx1ZXMgPSBpbml0T3B0aW9ucy5hY3JWYWx1ZXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5pdE9wdGlvbnMubWVzc2FnZVJlY2VpdmVUaW1lb3V0ID09PSAnbnVtYmVyJyAmJiBpbml0T3B0aW9ucy5tZXNzYWdlUmVjZWl2ZVRpbWVvdXQgPiAwKSB7XG4gICAgICAgICAgICAgICAga2MubWVzc2FnZVJlY2VpdmVUaW1lb3V0ID0gaW5pdE9wdGlvbnMubWVzc2FnZVJlY2VpdmVUaW1lb3V0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBrYy5tZXNzYWdlUmVjZWl2ZVRpbWVvdXQgPSAxMDAwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgha2MucmVzcG9uc2VNb2RlKSB7XG4gICAgICAgICAgICBrYy5yZXNwb25zZU1vZGUgPSAnZnJhZ21lbnQnO1xuICAgICAgICB9XG4gICAgICAgIGlmICgha2MucmVzcG9uc2VUeXBlKSB7XG4gICAgICAgICAgICBrYy5yZXNwb25zZVR5cGUgPSAnY29kZSc7XG4gICAgICAgICAgICBrYy5mbG93ID0gJ3N0YW5kYXJkJztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwcm9taXNlID0gY3JlYXRlUHJvbWlzZSgpO1xuXG4gICAgICAgIHZhciBpbml0UHJvbWlzZSA9IGNyZWF0ZVByb21pc2UoKTtcbiAgICAgICAgaW5pdFByb21pc2UucHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAga2Mub25SZWFkeSAmJiBrYy5vblJlYWR5KGtjLmF1dGhlbnRpY2F0ZWQpO1xuICAgICAgICAgICAgcHJvbWlzZS5zZXRTdWNjZXNzKGtjLmF1dGhlbnRpY2F0ZWQpO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgcHJvbWlzZS5zZXRFcnJvcihlcnJvcik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBjb25maWdQcm9taXNlID0gbG9hZENvbmZpZygpO1xuXG4gICAgICAgIGZ1bmN0aW9uIG9uTG9hZCgpIHtcbiAgICAgICAgICAgIHZhciBkb0xvZ2luID0gZnVuY3Rpb24ocHJvbXB0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwcm9tcHQpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wcm9tcHQgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGluaXRPcHRpb25zICYmIGluaXRPcHRpb25zLmxvY2FsZSkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmxvY2FsZSA9IGluaXRPcHRpb25zLmxvY2FsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAga2MubG9naW4ob3B0aW9ucykudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGluaXRQcm9taXNlLnNldFN1Y2Nlc3MoKTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5pdFByb21pc2Uuc2V0RXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGNoZWNrU3NvU2lsZW50bHkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWZybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG4gICAgICAgICAgICAgICAgdmFyIHNyYyA9IGtjLmNyZWF0ZUxvZ2luVXJsKHtwcm9tcHQ6ICdub25lJywgcmVkaXJlY3RVcmk6IGtjLnNpbGVudENoZWNrU3NvUmVkaXJlY3RVcml9KTtcbiAgICAgICAgICAgICAgICBpZnJtLnNldEF0dHJpYnV0ZShcInNyY1wiLCBzcmMpO1xuICAgICAgICAgICAgICAgIGlmcm0uc2V0QXR0cmlidXRlKFwic2FuZGJveFwiLCBcImFsbG93LXN0b3JhZ2UtYWNjZXNzLWJ5LXVzZXItYWN0aXZhdGlvbiBhbGxvdy1zY3JpcHRzIGFsbG93LXNhbWUtb3JpZ2luXCIpO1xuICAgICAgICAgICAgICAgIGlmcm0uc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgXCJrZXljbG9hay1zaWxlbnQtY2hlY2stc3NvXCIpO1xuICAgICAgICAgICAgICAgIGlmcm0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZybSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZUNhbGxiYWNrID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50Lm9yaWdpbiAhPT0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiB8fCBpZnJtLmNvbnRlbnRXaW5kb3cgIT09IGV2ZW50LnNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9hdXRoID0gcGFyc2VDYWxsYmFjayhldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0NhbGxiYWNrKG9hdXRoLCBpbml0UHJvbWlzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChpZnJtKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG1lc3NhZ2VDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBtZXNzYWdlQ2FsbGJhY2spO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIHN3aXRjaCAoaW5pdE9wdGlvbnMub25Mb2FkKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2hlY2stc3NvJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvZ2luSWZyYW1lLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBDaGVja0xvZ2luSWZyYW1lKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja0xvZ2luSWZyYW1lKCkudGhlbihmdW5jdGlvbiAodW5jaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdW5jaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrYy5zaWxlbnRDaGVja1Nzb1JlZGlyZWN0VXJpID8gY2hlY2tTc29TaWxlbnRseSgpIDogZG9Mb2dpbihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0UHJvbWlzZS5zZXRTdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFByb21pc2Uuc2V0RXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrYy5zaWxlbnRDaGVja1Nzb1JlZGlyZWN0VXJpID8gY2hlY2tTc29TaWxlbnRseSgpIDogZG9Mb2dpbihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbG9naW4tcmVxdWlyZWQnOlxuICAgICAgICAgICAgICAgICAgICBkb0xvZ2luKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyAnSW52YWxpZCB2YWx1ZSBmb3Igb25Mb2FkJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NJbml0KCkge1xuICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gcGFyc2VDYWxsYmFjayh3aW5kb3cubG9jYXRpb24uaHJlZik7XG5cbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh3aW5kb3cuaGlzdG9yeS5zdGF0ZSwgbnVsbCwgY2FsbGJhY2submV3VXJsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIGNhbGxiYWNrLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHVwQ2hlY2tMb2dpbklmcmFtZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NDYWxsYmFjayhjYWxsYmFjaywgaW5pdFByb21pc2UpO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpbml0UHJvbWlzZS5zZXRFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGluaXRPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluaXRPcHRpb25zLnRva2VuICYmIGluaXRPcHRpb25zLnJlZnJlc2hUb2tlbikge1xuICAgICAgICAgICAgICAgICAgICBzZXRUb2tlbihpbml0T3B0aW9ucy50b2tlbiwgaW5pdE9wdGlvbnMucmVmcmVzaFRva2VuLCBpbml0T3B0aW9ucy5pZFRva2VuKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobG9naW5JZnJhbWUuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR1cENoZWNrTG9naW5JZnJhbWUoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrTG9naW5JZnJhbWUoKS50aGVuKGZ1bmN0aW9uICh1bmNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVuY2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2Mub25BdXRoU3VjY2VzcyAmJiBrYy5vbkF1dGhTdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0UHJvbWlzZS5zZXRTdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZUNoZWNrSWZyYW1lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0UHJvbWlzZS5zZXRTdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFByb21pc2Uuc2V0RXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrYy51cGRhdGVUb2tlbigtMSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrYy5vbkF1dGhTdWNjZXNzICYmIGtjLm9uQXV0aFN1Y2Nlc3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0UHJvbWlzZS5zZXRTdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtjLm9uQXV0aEVycm9yICYmIGtjLm9uQXV0aEVycm9yKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluaXRPcHRpb25zLm9uTG9hZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0UHJvbWlzZS5zZXRFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluaXRPcHRpb25zLm9uTG9hZCkge1xuICAgICAgICAgICAgICAgICAgICBvbkxvYWQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbml0UHJvbWlzZS5zZXRTdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbml0UHJvbWlzZS5zZXRTdWNjZXNzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkb21SZWFkeSgpIHtcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gY3JlYXRlUHJvbWlzZSgpO1xuXG4gICAgICAgICAgICB2YXIgY2hlY2tSZWFkeVN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnaW50ZXJhY3RpdmUnIHx8IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsIGNoZWNrUmVhZHlTdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2Uuc2V0U3VjY2VzcygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgY2hlY2tSZWFkeVN0YXRlKTtcblxuICAgICAgICAgICAgY2hlY2tSZWFkeVN0YXRlKCk7IC8vIGp1c3QgaW4gY2FzZSB0aGUgZXZlbnQgd2FzIGFscmVhZHkgZmlyZWQgYW5kIHdlIG1pc3NlZCBpdCAoaW4gY2FzZSB0aGUgaW5pdCBpcyBkb25lIGxhdGVyIHRoYW4gYXQgdGhlIGxvYWQgdGltZSwgaS5lLiBpdCdzIGRvbmUgZnJvbSBjb2RlKVxuXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uZmlnUHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRvbVJlYWR5KClcbiAgICAgICAgICAgICAgICAudGhlbihjaGVjazNwQ29va2llc1N1cHBvcnRlZClcbiAgICAgICAgICAgICAgICAudGhlbihwcm9jZXNzSW5pdClcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2Uuc2V0RXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uZmlnUHJvbWlzZS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHByb21pc2Uuc2V0RXJyb3IoZXJyb3IpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgIH07XG5cbiAgICBrYy5sb2dpbiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBhZGFwdGVyLmxvZ2luKG9wdGlvbnMpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbURhdGEobGVuKSB7XG4gICAgICAgIC8vIHVzZSB3ZWIgY3J5cHRvIEFQSXMgaWYgcG9zc2libGVcbiAgICAgICAgdmFyIGFycmF5ID0gbnVsbDtcbiAgICAgICAgdmFyIGNyeXB0byA9IHdpbmRvdy5jcnlwdG8gfHwgd2luZG93Lm1zQ3J5cHRvO1xuICAgICAgICBpZiAoY3J5cHRvICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgd2luZG93LlVpbnQ4QXJyYXkpIHtcbiAgICAgICAgICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcbiAgICAgICAgICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYXJyYXkpO1xuICAgICAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZmFsbGJhY2sgdG8gTWF0aCByYW5kb21cbiAgICAgICAgYXJyYXkgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBhcnJheS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgYXJyYXlbal0gPSBNYXRoLmZsb29yKDI1NiAqIE1hdGgucmFuZG9tKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUNvZGVWZXJpZmllcihsZW4pIHtcbiAgICAgICAgcmV0dXJuIGdlbmVyYXRlUmFuZG9tU3RyaW5nKGxlbiwgJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Jyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21TdHJpbmcobGVuLCBhbHBoYWJldCl7XG4gICAgICAgIHZhciByYW5kb21EYXRhID0gZ2VuZXJhdGVSYW5kb21EYXRhKGxlbik7XG4gICAgICAgIHZhciBjaGFycyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjaGFyc1tpXSA9IGFscGhhYmV0LmNoYXJDb2RlQXQocmFuZG9tRGF0YVtpXSAlIGFscGhhYmV0Lmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgY2hhcnMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlUGtjZUNoYWxsZW5nZShwa2NlTWV0aG9kLCBjb2RlVmVyaWZpZXIpIHtcbiAgICAgICAgc3dpdGNoIChwa2NlTWV0aG9kKSB7XG4gICAgICAgICAgICAvLyBUaGUgdXNlIG9mIHRoZSBcInBsYWluXCIgbWV0aG9kIGlzIGNvbnNpZGVyZWQgaW5zZWN1cmUgYW5kIHRoZXJlZm9yZSBub3Qgc3VwcG9ydGVkLlxuICAgICAgICAgICAgY2FzZSBcIlMyNTZcIjpcbiAgICAgICAgICAgICAgICAvLyBoYXNoIGNvZGVWZXJpZmllciwgdGhlbiBlbmNvZGUgYXMgdXJsLXNhZmUgYmFzZTY0IHdpdGhvdXQgcGFkZGluZ1xuICAgICAgICAgICAgICAgIHZhciBoYXNoQnl0ZXMgPSBuZXcgVWludDhBcnJheShzaGEyNTYuYXJyYXlCdWZmZXIoY29kZVZlcmlmaWVyKSk7XG4gICAgICAgICAgICAgICAgdmFyIGVuY29kZWRIYXNoID0gYmFzZTY0LmZyb21CeXRlQXJyYXkoaGFzaEJ5dGVzKVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwrL2csICctJylcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcLy9nLCAnXycpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXD0vZywgJycpO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbmNvZGVkSGFzaDtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgJ0ludmFsaWQgdmFsdWUgZm9yIHBrY2VNZXRob2QnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRDbGFpbXNQYXJhbWV0ZXIocmVxdWVzdGVkQWNyKXtcbiAgICAgICAgdmFyIGNsYWltcyA9IHtcbiAgICAgICAgICAgIGlkX3Rva2VuOiB7XG4gICAgICAgICAgICAgICAgYWNyOiByZXF1ZXN0ZWRBY3JcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGNsYWltcyk7XG4gICAgfVxuXG4gICAga2MuY3JlYXRlTG9naW5VcmwgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IGNyZWF0ZVVVSUQoKTtcbiAgICAgICAgdmFyIG5vbmNlID0gY3JlYXRlVVVJRCgpO1xuXG4gICAgICAgIHZhciByZWRpcmVjdFVyaSA9IGFkYXB0ZXIucmVkaXJlY3RVcmkob3B0aW9ucyk7XG5cbiAgICAgICAgdmFyIGNhbGxiYWNrU3RhdGUgPSB7XG4gICAgICAgICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICAgICAgICBub25jZTogbm9uY2UsXG4gICAgICAgICAgICByZWRpcmVjdFVyaTogZW5jb2RlVVJJQ29tcG9uZW50KHJlZGlyZWN0VXJpKVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMucHJvbXB0KSB7XG4gICAgICAgICAgICBjYWxsYmFja1N0YXRlLnByb21wdCA9IG9wdGlvbnMucHJvbXB0O1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGJhc2VVcmw7XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYWN0aW9uID09ICdyZWdpc3RlcicpIHtcbiAgICAgICAgICAgIGJhc2VVcmwgPSBrYy5lbmRwb2ludHMucmVnaXN0ZXIoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJhc2VVcmwgPSBrYy5lbmRwb2ludHMuYXV0aG9yaXplKCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2NvcGUgPSBvcHRpb25zICYmIG9wdGlvbnMuc2NvcGUgfHwga2Muc2NvcGU7XG4gICAgICAgIGlmICghc2NvcGUpIHtcbiAgICAgICAgICAgIC8vIGlmIHNjb3BlIGlzIG5vdCBzZXQsIGRlZmF1bHQgdG8gXCJvcGVuaWRcIlxuICAgICAgICAgICAgc2NvcGUgPSBcIm9wZW5pZFwiO1xuICAgICAgICB9IGVsc2UgaWYgKHNjb3BlLmluZGV4T2YoXCJvcGVuaWRcIikgPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBpZiBvcGVuaWQgc2NvcGUgaXMgbWlzc2luZywgcHJlZml4IHRoZSBnaXZlbiBzY29wZXMgd2l0aCBpdFxuICAgICAgICAgICAgc2NvcGUgPSBcIm9wZW5pZCBcIiArIHNjb3BlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHVybCA9IGJhc2VVcmxcbiAgICAgICAgICAgICsgJz9jbGllbnRfaWQ9JyArIGVuY29kZVVSSUNvbXBvbmVudChrYy5jbGllbnRJZClcbiAgICAgICAgICAgICsgJyZyZWRpcmVjdF91cmk9JyArIGVuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdFVyaSlcbiAgICAgICAgICAgICsgJyZzdGF0ZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0YXRlKVxuICAgICAgICAgICAgKyAnJnJlc3BvbnNlX21vZGU9JyArIGVuY29kZVVSSUNvbXBvbmVudChrYy5yZXNwb25zZU1vZGUpXG4gICAgICAgICAgICArICcmcmVzcG9uc2VfdHlwZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGtjLnJlc3BvbnNlVHlwZSlcbiAgICAgICAgICAgICsgJyZzY29wZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHNjb3BlKTtcbiAgICAgICAgaWYgKHVzZU5vbmNlKSB7XG4gICAgICAgICAgICB1cmwgPSB1cmwgKyAnJm5vbmNlPScgKyBlbmNvZGVVUklDb21wb25lbnQobm9uY2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5wcm9tcHQpIHtcbiAgICAgICAgICAgIHVybCArPSAnJnByb21wdD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KG9wdGlvbnMucHJvbXB0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubWF4QWdlKSB7XG4gICAgICAgICAgICB1cmwgKz0gJyZtYXhfYWdlPScgKyBlbmNvZGVVUklDb21wb25lbnQob3B0aW9ucy5tYXhBZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sb2dpbkhpbnQpIHtcbiAgICAgICAgICAgIHVybCArPSAnJmxvZ2luX2hpbnQ9JyArIGVuY29kZVVSSUNvbXBvbmVudChvcHRpb25zLmxvZ2luSGludCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmlkcEhpbnQpIHtcbiAgICAgICAgICAgIHVybCArPSAnJmtjX2lkcF9oaW50PScgKyBlbmNvZGVVUklDb21wb25lbnQob3B0aW9ucy5pZHBIaW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYWN0aW9uICYmIG9wdGlvbnMuYWN0aW9uICE9ICdyZWdpc3RlcicpIHtcbiAgICAgICAgICAgIHVybCArPSAnJmtjX2FjdGlvbj0nICsgZW5jb2RlVVJJQ29tcG9uZW50KG9wdGlvbnMuYWN0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubG9jYWxlKSB7XG4gICAgICAgICAgICB1cmwgKz0gJyZ1aV9sb2NhbGVzPScgKyBlbmNvZGVVUklDb21wb25lbnQob3B0aW9ucy5sb2NhbGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5hY3IpIHtcbiAgICAgICAgICAgIHZhciBjbGFpbXNQYXJhbWV0ZXIgPSBidWlsZENsYWltc1BhcmFtZXRlcihvcHRpb25zLmFjcik7XG4gICAgICAgICAgICB1cmwgKz0gJyZjbGFpbXM9JyArIGVuY29kZVVSSUNvbXBvbmVudChjbGFpbXNQYXJhbWV0ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKChvcHRpb25zICYmIG9wdGlvbnMuYWNyVmFsdWVzKSB8fCBrYy5hY3JWYWx1ZXMpIHtcbiAgICAgICAgICAgIHVybCArPSAnJmFjcl92YWx1ZXM9JyArIGVuY29kZVVSSUNvbXBvbmVudChvcHRpb25zLmFjclZhbHVlcyB8fCBrYy5hY3JWYWx1ZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGtjLnBrY2VNZXRob2QpIHtcbiAgICAgICAgICAgIHZhciBjb2RlVmVyaWZpZXIgPSBnZW5lcmF0ZUNvZGVWZXJpZmllcig5Nik7XG4gICAgICAgICAgICBjYWxsYmFja1N0YXRlLnBrY2VDb2RlVmVyaWZpZXIgPSBjb2RlVmVyaWZpZXI7XG4gICAgICAgICAgICB2YXIgcGtjZUNoYWxsZW5nZSA9IGdlbmVyYXRlUGtjZUNoYWxsZW5nZShrYy5wa2NlTWV0aG9kLCBjb2RlVmVyaWZpZXIpO1xuICAgICAgICAgICAgdXJsICs9ICcmY29kZV9jaGFsbGVuZ2U9JyArIHBrY2VDaGFsbGVuZ2U7XG4gICAgICAgICAgICB1cmwgKz0gJyZjb2RlX2NoYWxsZW5nZV9tZXRob2Q9JyArIGtjLnBrY2VNZXRob2Q7XG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFja1N0b3JhZ2UuYWRkKGNhbGxiYWNrU3RhdGUpO1xuXG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfTtcblxuICAgIGtjLmxvZ291dCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGFkYXB0ZXIubG9nb3V0KG9wdGlvbnMpO1xuICAgIH07XG5cbiAgICBrYy5jcmVhdGVMb2dvdXRVcmwgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIHZhciB1cmwgPSBrYy5lbmRwb2ludHMubG9nb3V0KClcbiAgICAgICAgICAgICsgJz9jbGllbnRfaWQ9JyArIGVuY29kZVVSSUNvbXBvbmVudChrYy5jbGllbnRJZClcbiAgICAgICAgICAgICsgJyZwb3N0X2xvZ291dF9yZWRpcmVjdF91cmk9JyArIGVuY29kZVVSSUNvbXBvbmVudChhZGFwdGVyLnJlZGlyZWN0VXJpKG9wdGlvbnMsIGZhbHNlKSk7XG5cbiAgICAgICAgaWYgKGtjLmlkVG9rZW4pIHtcbiAgICAgICAgICAgIHVybCArPSAnJmlkX3Rva2VuX2hpbnQ9JyArIGVuY29kZVVSSUNvbXBvbmVudChrYy5pZFRva2VuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfTtcblxuICAgIGtjLnJlZ2lzdGVyID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGFkYXB0ZXIucmVnaXN0ZXIob3B0aW9ucyk7XG4gICAgfTtcblxuICAgIGtjLmNyZWF0ZVJlZ2lzdGVyVXJsID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zLmFjdGlvbiA9ICdyZWdpc3Rlcic7XG4gICAgICAgIHJldHVybiBrYy5jcmVhdGVMb2dpblVybChvcHRpb25zKTtcbiAgICB9O1xuXG4gICAga2MuY3JlYXRlQWNjb3VudFVybCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHJlYWxtID0gZ2V0UmVhbG1VcmwoKTtcbiAgICAgICAgdmFyIHVybCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHR5cGVvZiByZWFsbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVybCA9IHJlYWxtXG4gICAgICAgICAgICArICcvYWNjb3VudCdcbiAgICAgICAgICAgICsgJz9yZWZlcnJlcj0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGtjLmNsaWVudElkKVxuICAgICAgICAgICAgKyAnJnJlZmVycmVyX3VyaT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGFkYXB0ZXIucmVkaXJlY3RVcmkob3B0aW9ucykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfTtcblxuICAgIGtjLmFjY291bnRNYW5hZ2VtZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBhZGFwdGVyLmFjY291bnRNYW5hZ2VtZW50KCk7XG4gICAgfTtcblxuICAgIGtjLmhhc1JlYWxtUm9sZSA9IGZ1bmN0aW9uIChyb2xlKSB7XG4gICAgICAgIHZhciBhY2Nlc3MgPSBrYy5yZWFsbUFjY2VzcztcbiAgICAgICAgcmV0dXJuICEhYWNjZXNzICYmIGFjY2Vzcy5yb2xlcy5pbmRleE9mKHJvbGUpID49IDA7XG4gICAgfTtcblxuICAgIGtjLmhhc1Jlc291cmNlUm9sZSA9IGZ1bmN0aW9uKHJvbGUsIHJlc291cmNlKSB7XG4gICAgICAgIGlmICgha2MucmVzb3VyY2VBY2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhY2Nlc3MgPSBrYy5yZXNvdXJjZUFjY2Vzc1tyZXNvdXJjZSB8fCBrYy5jbGllbnRJZF07XG4gICAgICAgIHJldHVybiAhIWFjY2VzcyAmJiBhY2Nlc3Mucm9sZXMuaW5kZXhPZihyb2xlKSA+PSAwO1xuICAgIH07XG5cbiAgICBrYy5sb2FkVXNlclByb2ZpbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHVybCA9IGdldFJlYWxtVXJsKCkgKyAnL2FjY291bnQnO1xuICAgICAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHJlcS5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICAgICAgICByZXEuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgcmVxLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnYmVhcmVyICcgKyBrYy50b2tlbik7XG5cbiAgICAgICAgdmFyIHByb21pc2UgPSBjcmVhdGVQcm9taXNlKCk7XG5cbiAgICAgICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGtjLnByb2ZpbGUgPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnNldFN1Y2Nlc3Moa2MucHJvZmlsZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5zZXRFcnJvcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXEuc2VuZCgpO1xuXG4gICAgICAgIHJldHVybiBwcm9taXNlLnByb21pc2U7XG4gICAgfTtcblxuICAgIGtjLmxvYWRVc2VySW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdXJsID0ga2MuZW5kcG9pbnRzLnVzZXJpbmZvKCk7XG4gICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgcmVxLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgICByZXEuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsICdiZWFyZXIgJyArIGtjLnRva2VuKTtcblxuICAgICAgICB2YXIgcHJvbWlzZSA9IGNyZWF0ZVByb21pc2UoKTtcblxuICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAga2MudXNlckluZm8gPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnNldFN1Y2Nlc3Moa2MudXNlckluZm8pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2Uuc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVxLnNlbmQoKTtcblxuICAgICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgIH07XG5cbiAgICBrYy5pc1Rva2VuRXhwaXJlZCA9IGZ1bmN0aW9uKG1pblZhbGlkaXR5KSB7XG4gICAgICAgIGlmICgha2MudG9rZW5QYXJzZWQgfHwgKCFrYy5yZWZyZXNoVG9rZW4gJiYga2MuZmxvdyAhPSAnaW1wbGljaXQnICkpIHtcbiAgICAgICAgICAgIHRocm93ICdOb3QgYXV0aGVudGljYXRlZCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoa2MudGltZVNrZXcgPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9nSW5mbygnW0tFWUNMT0FLXSBVbmFibGUgdG8gZGV0ZXJtaW5lIGlmIHRva2VuIGlzIGV4cGlyZWQgYXMgdGltZXNrZXcgaXMgbm90IHNldCcpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZXhwaXJlc0luID0ga2MudG9rZW5QYXJzZWRbJ2V4cCddIC0gTWF0aC5jZWlsKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCkgKyBrYy50aW1lU2tldztcbiAgICAgICAgaWYgKG1pblZhbGlkaXR5KSB7XG4gICAgICAgICAgICBpZiAoaXNOYU4obWluVmFsaWRpdHkpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ0ludmFsaWQgbWluVmFsaWRpdHknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXhwaXJlc0luIC09IG1pblZhbGlkaXR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBleHBpcmVzSW4gPCAwO1xuICAgIH07XG5cbiAgICBrYy51cGRhdGVUb2tlbiA9IGZ1bmN0aW9uKG1pblZhbGlkaXR5KSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gY3JlYXRlUHJvbWlzZSgpO1xuXG4gICAgICAgIGlmICgha2MucmVmcmVzaFRva2VuKSB7XG4gICAgICAgICAgICBwcm9taXNlLnNldEVycm9yKCk7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgbWluVmFsaWRpdHkgPSBtaW5WYWxpZGl0eSB8fCA1O1xuXG4gICAgICAgIHZhciBleGVjID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgcmVmcmVzaFRva2VuID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAobWluVmFsaWRpdHkgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZWZyZXNoVG9rZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGxvZ0luZm8oJ1tLRVlDTE9BS10gUmVmcmVzaGluZyB0b2tlbjogZm9yY2VkIHJlZnJlc2gnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWtjLnRva2VuUGFyc2VkIHx8IGtjLmlzVG9rZW5FeHBpcmVkKG1pblZhbGlkaXR5KSkge1xuICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgbG9nSW5mbygnW0tFWUNMT0FLXSBSZWZyZXNoaW5nIHRva2VuOiB0b2tlbiBleHBpcmVkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghcmVmcmVzaFRva2VuKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5zZXRTdWNjZXNzKGZhbHNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9ICdncmFudF90eXBlPXJlZnJlc2hfdG9rZW4mJyArICdyZWZyZXNoX3Rva2VuPScgKyBrYy5yZWZyZXNoVG9rZW47XG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IGtjLmVuZHBvaW50cy50b2tlbigpO1xuXG4gICAgICAgICAgICAgICAgcmVmcmVzaFF1ZXVlLnB1c2gocHJvbWlzZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVmcmVzaFF1ZXVlLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9wZW4oJ1BPU1QnLCB1cmwsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICByZXEuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpO1xuICAgICAgICAgICAgICAgICAgICByZXEud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBwYXJhbXMgKz0gJyZjbGllbnRfaWQ9JyArIGVuY29kZVVSSUNvbXBvbmVudChrYy5jbGllbnRJZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVMb2NhbCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dJbmZvKCdbS0VZQ0xPQUtdIFRva2VuIHJlZnJlc2hlZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVMb2NhbCA9ICh0aW1lTG9jYWwgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSkgLyAyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b2tlblJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2VUZXh0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUb2tlbih0b2tlblJlc3BvbnNlWydhY2Nlc3NfdG9rZW4nXSwgdG9rZW5SZXNwb25zZVsncmVmcmVzaF90b2tlbiddLCB0b2tlblJlc3BvbnNlWydpZF90b2tlbiddLCB0aW1lTG9jYWwpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtjLm9uQXV0aFJlZnJlc2hTdWNjZXNzICYmIGtjLm9uQXV0aFJlZnJlc2hTdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHAgPSByZWZyZXNoUXVldWUucG9wKCk7IHAgIT0gbnVsbDsgcCA9IHJlZnJlc2hRdWV1ZS5wb3AoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5zZXRTdWNjZXNzKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nV2FybignW0tFWUNMT0FLXSBGYWlsZWQgdG8gcmVmcmVzaCB0b2tlbicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDQwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2MuY2xlYXJUb2tlbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2Mub25BdXRoUmVmcmVzaEVycm9yICYmIGtjLm9uQXV0aFJlZnJlc2hFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwID0gcmVmcmVzaFF1ZXVlLnBvcCgpOyBwICE9IG51bGw7IHAgPSByZWZyZXNoUXVldWUucG9wKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAuc2V0RXJyb3IodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgcmVxLnNlbmQocGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGxvZ2luSWZyYW1lLmVuYWJsZSkge1xuICAgICAgICAgICAgdmFyIGlmcmFtZVByb21pc2UgPSBjaGVja0xvZ2luSWZyYW1lKCk7XG4gICAgICAgICAgICBpZnJhbWVQcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZXhlYygpO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLnNldEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXhlYygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHByb21pc2UucHJvbWlzZTtcbiAgICB9O1xuXG4gICAga2MuY2xlYXJUb2tlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoa2MudG9rZW4pIHtcbiAgICAgICAgICAgIHNldFRva2VuKG51bGwsIG51bGwsIG51bGwpO1xuICAgICAgICAgICAga2Mub25BdXRoTG9nb3V0ICYmIGtjLm9uQXV0aExvZ291dCgpO1xuICAgICAgICAgICAgaWYgKGtjLmxvZ2luUmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgICBrYy5sb2dpbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldFJlYWxtVXJsKCkge1xuICAgICAgICBpZiAodHlwZW9mIGtjLmF1dGhTZXJ2ZXJVcmwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAoa2MuYXV0aFNlcnZlclVybC5jaGFyQXQoa2MuYXV0aFNlcnZlclVybC5sZW5ndGggLSAxKSA9PSAnLycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ga2MuYXV0aFNlcnZlclVybCArICdyZWFsbXMvJyArIGVuY29kZVVSSUNvbXBvbmVudChrYy5yZWFsbSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBrYy5hdXRoU2VydmVyVXJsICsgJy9yZWFsbXMvJyArIGVuY29kZVVSSUNvbXBvbmVudChrYy5yZWFsbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0T3JpZ2luKCkge1xuICAgICAgICBpZiAoIXdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAod2luZG93LmxvY2F0aW9uLnBvcnQgPyAnOicgKyB3aW5kb3cubG9jYXRpb24ucG9ydDogJycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcm9jZXNzQ2FsbGJhY2sob2F1dGgsIHByb21pc2UpIHtcbiAgICAgICAgdmFyIGNvZGUgPSBvYXV0aC5jb2RlO1xuICAgICAgICB2YXIgZXJyb3IgPSBvYXV0aC5lcnJvcjtcbiAgICAgICAgdmFyIHByb21wdCA9IG9hdXRoLnByb21wdDtcblxuICAgICAgICB2YXIgdGltZUxvY2FsID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgICAgICAgaWYgKG9hdXRoWydrY19hY3Rpb25fc3RhdHVzJ10pIHtcbiAgICAgICAgICAgIGtjLm9uQWN0aW9uVXBkYXRlICYmIGtjLm9uQWN0aW9uVXBkYXRlKG9hdXRoWydrY19hY3Rpb25fc3RhdHVzJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAocHJvbXB0ICE9ICdub25lJykge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvckRhdGEgPSB7IGVycm9yOiBlcnJvciwgZXJyb3JfZGVzY3JpcHRpb246IG9hdXRoLmVycm9yX2Rlc2NyaXB0aW9uIH07XG4gICAgICAgICAgICAgICAga2Mub25BdXRoRXJyb3IgJiYga2Mub25BdXRoRXJyb3IoZXJyb3JEYXRhKTtcbiAgICAgICAgICAgICAgICBwcm9taXNlICYmIHByb21pc2Uuc2V0RXJyb3IoZXJyb3JEYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZSAmJiBwcm9taXNlLnNldFN1Y2Nlc3MoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmICgoa2MuZmxvdyAhPSAnc3RhbmRhcmQnKSAmJiAob2F1dGguYWNjZXNzX3Rva2VuIHx8IG9hdXRoLmlkX3Rva2VuKSkge1xuICAgICAgICAgICAgYXV0aFN1Y2Nlc3Mob2F1dGguYWNjZXNzX3Rva2VuLCBudWxsLCBvYXV0aC5pZF90b2tlbiwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoKGtjLmZsb3cgIT0gJ2ltcGxpY2l0JykgJiYgY29kZSkge1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9ICdjb2RlPScgKyBjb2RlICsgJyZncmFudF90eXBlPWF1dGhvcml6YXRpb25fY29kZSc7XG4gICAgICAgICAgICB2YXIgdXJsID0ga2MuZW5kcG9pbnRzLnRva2VuKCk7XG5cbiAgICAgICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgIHJlcS5vcGVuKCdQT1NUJywgdXJsLCB0cnVlKTtcbiAgICAgICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyk7XG5cbiAgICAgICAgICAgIHBhcmFtcyArPSAnJmNsaWVudF9pZD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGtjLmNsaWVudElkKTtcbiAgICAgICAgICAgIHBhcmFtcyArPSAnJnJlZGlyZWN0X3VyaT0nICsgb2F1dGgucmVkaXJlY3RVcmk7XG5cbiAgICAgICAgICAgIGlmIChvYXV0aC5wa2NlQ29kZVZlcmlmaWVyKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zICs9ICcmY29kZV92ZXJpZmllcj0nICsgb2F1dGgucGtjZUNvZGVWZXJpZmllcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVxLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG5cbiAgICAgICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA9PSAyMDApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuUmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aFN1Y2Nlc3ModG9rZW5SZXNwb25zZVsnYWNjZXNzX3Rva2VuJ10sIHRva2VuUmVzcG9uc2VbJ3JlZnJlc2hfdG9rZW4nXSwgdG9rZW5SZXNwb25zZVsnaWRfdG9rZW4nXSwga2MuZmxvdyA9PT0gJ3N0YW5kYXJkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZUNoZWNrSWZyYW1lKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrYy5vbkF1dGhFcnJvciAmJiBrYy5vbkF1dGhFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSAmJiBwcm9taXNlLnNldEVycm9yKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXEuc2VuZChwYXJhbXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYXV0aFN1Y2Nlc3MoYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiwgaWRUb2tlbiwgZnVsZmlsbFByb21pc2UpIHtcbiAgICAgICAgICAgIHRpbWVMb2NhbCA9ICh0aW1lTG9jYWwgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSkgLyAyO1xuXG4gICAgICAgICAgICBzZXRUb2tlbihhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBpZFRva2VuLCB0aW1lTG9jYWwpO1xuXG4gICAgICAgICAgICBpZiAodXNlTm9uY2UgJiYgKChrYy50b2tlblBhcnNlZCAmJiBrYy50b2tlblBhcnNlZC5ub25jZSAhPSBvYXV0aC5zdG9yZWROb25jZSkgfHxcbiAgICAgICAgICAgICAgICAoa2MucmVmcmVzaFRva2VuUGFyc2VkICYmIGtjLnJlZnJlc2hUb2tlblBhcnNlZC5ub25jZSAhPSBvYXV0aC5zdG9yZWROb25jZSkgfHxcbiAgICAgICAgICAgICAgICAoa2MuaWRUb2tlblBhcnNlZCAmJiBrYy5pZFRva2VuUGFyc2VkLm5vbmNlICE9IG9hdXRoLnN0b3JlZE5vbmNlKSkpIHtcblxuICAgICAgICAgICAgICAgIGxvZ0luZm8oJ1tLRVlDTE9BS10gSW52YWxpZCBub25jZSwgY2xlYXJpbmcgdG9rZW4nKTtcbiAgICAgICAgICAgICAgICBrYy5jbGVhclRva2VuKCk7XG4gICAgICAgICAgICAgICAgcHJvbWlzZSAmJiBwcm9taXNlLnNldEVycm9yKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChmdWxmaWxsUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICBrYy5vbkF1dGhTdWNjZXNzICYmIGtjLm9uQXV0aFN1Y2Nlc3MoKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSAmJiBwcm9taXNlLnNldFN1Y2Nlc3MoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvYWRDb25maWcodXJsKSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gY3JlYXRlUHJvbWlzZSgpO1xuICAgICAgICB2YXIgY29uZmlnVXJsO1xuXG4gICAgICAgIGlmICghY29uZmlnKSB7XG4gICAgICAgICAgICBjb25maWdVcmwgPSAna2V5Y2xvYWsuanNvbic7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNvbmZpZ1VybCA9IGNvbmZpZztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldHVwT2lkY0VuZG9pbnRzKG9pZGNDb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICBpZiAoISBvaWRjQ29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGtjLmVuZHBvaW50cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRSZWFsbVVybCgpICsgJy9wcm90b2NvbC9vcGVuaWQtY29ubmVjdC9hdXRoJztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldFJlYWxtVXJsKCkgKyAnL3Byb3RvY29sL29wZW5pZC1jb25uZWN0L3Rva2VuJztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbG9nb3V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRSZWFsbVVybCgpICsgJy9wcm90b2NvbC9vcGVuaWQtY29ubmVjdC9sb2dvdXQnO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjaGVja1Nlc3Npb25JZnJhbWU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNyYyA9IGdldFJlYWxtVXJsKCkgKyAnL3Byb3RvY29sL29wZW5pZC1jb25uZWN0L2xvZ2luLXN0YXR1cy1pZnJhbWUuaHRtbCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2MuaWZyYW1lVmVyc2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9IHNyYyArICc/dmVyc2lvbj0nICsga2MuaWZyYW1lVmVyc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzcmM7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRoaXJkUGFydHlDb29raWVzSWZyYW1lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSBnZXRSZWFsbVVybCgpICsgJy9wcm90b2NvbC9vcGVuaWQtY29ubmVjdC8zcC1jb29raWVzL3N0ZXAxLmh0bWwnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtjLmlmcmFtZVZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmMgPSBzcmMgKyAnP3ZlcnNpb249JyArIGtjLmlmcmFtZVZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3JjO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZWdpc3RlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UmVhbG1VcmwoKSArICcvcHJvdG9jb2wvb3BlbmlkLWNvbm5lY3QvcmVnaXN0cmF0aW9ucyc7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHVzZXJpbmZvOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRSZWFsbVVybCgpICsgJy9wcm90b2NvbC9vcGVuaWQtY29ubmVjdC91c2VyaW5mbyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBrYy5lbmRwb2ludHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcml6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2lkY0NvbmZpZ3VyYXRpb24uYXV0aG9yaXphdGlvbl9lbmRwb2ludDtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9pZGNDb25maWd1cmF0aW9uLnRva2VuX2VuZHBvaW50O1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBsb2dvdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvaWRjQ29uZmlndXJhdGlvbi5lbmRfc2Vzc2lvbl9lbmRwb2ludCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFwiTm90IHN1cHBvcnRlZCBieSB0aGUgT0lEQyBzZXJ2ZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvaWRjQ29uZmlndXJhdGlvbi5lbmRfc2Vzc2lvbl9lbmRwb2ludDtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tTZXNzaW9uSWZyYW1lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb2lkY0NvbmZpZ3VyYXRpb24uY2hlY2tfc2Vzc2lvbl9pZnJhbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIk5vdCBzdXBwb3J0ZWQgYnkgdGhlIE9JREMgc2VydmVyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2lkY0NvbmZpZ3VyYXRpb24uY2hlY2tfc2Vzc2lvbl9pZnJhbWU7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93ICdSZWRpcmVjdGlvbiB0byBcIlJlZ2lzdGVyIHVzZXJcIiBwYWdlIG5vdCBzdXBwb3J0ZWQgaW4gc3RhbmRhcmQgT0lEQyBtb2RlJztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdXNlcmluZm86IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvaWRjQ29uZmlndXJhdGlvbi51c2VyaW5mb19lbmRwb2ludCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFwiTm90IHN1cHBvcnRlZCBieSB0aGUgT0lEQyBzZXJ2ZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvaWRjQ29uZmlndXJhdGlvbi51c2VyaW5mb19lbmRwb2ludDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29uZmlnVXJsKSB7XG4gICAgICAgICAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICByZXEub3BlbignR0VUJywgY29uZmlnVXJsLCB0cnVlKTtcbiAgICAgICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuXG4gICAgICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDIwMCB8fCBmaWxlTG9hZGVkKHJlcSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maWcgPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZVRleHQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBrYy5hdXRoU2VydmVyVXJsID0gY29uZmlnWydhdXRoLXNlcnZlci11cmwnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtjLnJlYWxtID0gY29uZmlnWydyZWFsbSddO1xuICAgICAgICAgICAgICAgICAgICAgICAga2MuY2xpZW50SWQgPSBjb25maWdbJ3Jlc291cmNlJ107XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR1cE9pZGNFbmRvaW50cyhudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2Uuc2V0U3VjY2VzcygpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5zZXRFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmVxLnNlbmQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghY29uZmlnLmNsaWVudElkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ2NsaWVudElkIG1pc3NpbmcnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBrYy5jbGllbnRJZCA9IGNvbmZpZy5jbGllbnRJZDtcblxuICAgICAgICAgICAgdmFyIG9pZGNQcm92aWRlciA9IGNvbmZpZ1snb2lkY1Byb3ZpZGVyJ107XG4gICAgICAgICAgICBpZiAoIW9pZGNQcm92aWRlcikge1xuICAgICAgICAgICAgICAgIGlmICghY29uZmlnWyd1cmwnXSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzY3JpcHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NyaXB0c1tpXS5zcmMubWF0Y2goLy4qa2V5Y2xvYWtcXC5qcy8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLnVybCA9IHNjcmlwdHNbaV0uc3JjLnN1YnN0cigwLCBzY3JpcHRzW2ldLnNyYy5pbmRleE9mKCcvanMva2V5Y2xvYWsuanMnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFjb25maWcucmVhbG0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ3JlYWxtIG1pc3NpbmcnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGtjLmF1dGhTZXJ2ZXJVcmwgPSBjb25maWcudXJsO1xuICAgICAgICAgICAgICAgIGtjLnJlYWxtID0gY29uZmlnLnJlYWxtO1xuICAgICAgICAgICAgICAgIHNldHVwT2lkY0VuZG9pbnRzKG51bGwpO1xuICAgICAgICAgICAgICAgIHByb21pc2Uuc2V0U3VjY2VzcygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9pZGNQcm92aWRlciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9pZGNQcm92aWRlckNvbmZpZ1VybDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9pZGNQcm92aWRlci5jaGFyQXQob2lkY1Byb3ZpZGVyLmxlbmd0aCAtIDEpID09ICcvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2lkY1Byb3ZpZGVyQ29uZmlnVXJsID0gb2lkY1Byb3ZpZGVyICsgJy53ZWxsLWtub3duL29wZW5pZC1jb25maWd1cmF0aW9uJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9pZGNQcm92aWRlckNvbmZpZ1VybCA9IG9pZGNQcm92aWRlciArICcvLndlbGwta25vd24vb3BlbmlkLWNvbmZpZ3VyYXRpb24nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9wZW4oJ0dFVCcsIG9pZGNQcm92aWRlckNvbmZpZ1VybCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDIwMCB8fCBmaWxlTG9hZGVkKHJlcSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9pZGNQcm92aWRlckNvbmZpZyA9IEpTT04ucGFyc2UocmVxLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwT2lkY0VuZG9pbnRzKG9pZGNQcm92aWRlckNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2Uuc2V0U3VjY2VzcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2Uuc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgcmVxLnNlbmQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXR1cE9pZGNFbmRvaW50cyhvaWRjUHJvdmlkZXIpO1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnNldFN1Y2Nlc3MoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZpbGVMb2FkZWQoeGhyKSB7XG4gICAgICAgIHJldHVybiB4aHIuc3RhdHVzID09IDAgJiYgeGhyLnJlc3BvbnNlVGV4dCAmJiB4aHIucmVzcG9uc2VVUkwuc3RhcnRzV2l0aCgnZmlsZTonKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRUb2tlbih0b2tlbiwgcmVmcmVzaFRva2VuLCBpZFRva2VuLCB0aW1lTG9jYWwpIHtcbiAgICAgICAgaWYgKGtjLnRva2VuVGltZW91dEhhbmRsZSkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGtjLnRva2VuVGltZW91dEhhbmRsZSk7XG4gICAgICAgICAgICBrYy50b2tlblRpbWVvdXRIYW5kbGUgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlZnJlc2hUb2tlbikge1xuICAgICAgICAgICAga2MucmVmcmVzaFRva2VuID0gcmVmcmVzaFRva2VuO1xuICAgICAgICAgICAga2MucmVmcmVzaFRva2VuUGFyc2VkID0gand0RGVjb2RlKHJlZnJlc2hUb2tlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZWxldGUga2MucmVmcmVzaFRva2VuO1xuICAgICAgICAgICAgZGVsZXRlIGtjLnJlZnJlc2hUb2tlblBhcnNlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpZFRva2VuKSB7XG4gICAgICAgICAgICBrYy5pZFRva2VuID0gaWRUb2tlbjtcbiAgICAgICAgICAgIGtjLmlkVG9rZW5QYXJzZWQgPSBqd3REZWNvZGUoaWRUb2tlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZWxldGUga2MuaWRUb2tlbjtcbiAgICAgICAgICAgIGRlbGV0ZSBrYy5pZFRva2VuUGFyc2VkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICBrYy50b2tlbiA9IHRva2VuO1xuICAgICAgICAgICAga2MudG9rZW5QYXJzZWQgPSBqd3REZWNvZGUodG9rZW4pO1xuICAgICAgICAgICAga2Muc2Vzc2lvbklkID0ga2MudG9rZW5QYXJzZWQuc2Vzc2lvbl9zdGF0ZTtcbiAgICAgICAgICAgIGtjLmF1dGhlbnRpY2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAga2Muc3ViamVjdCA9IGtjLnRva2VuUGFyc2VkLnN1YjtcbiAgICAgICAgICAgIGtjLnJlYWxtQWNjZXNzID0ga2MudG9rZW5QYXJzZWQucmVhbG1fYWNjZXNzO1xuICAgICAgICAgICAga2MucmVzb3VyY2VBY2Nlc3MgPSBrYy50b2tlblBhcnNlZC5yZXNvdXJjZV9hY2Nlc3M7XG5cbiAgICAgICAgICAgIGlmICh0aW1lTG9jYWwpIHtcbiAgICAgICAgICAgICAgICBrYy50aW1lU2tldyA9IE1hdGguZmxvb3IodGltZUxvY2FsIC8gMTAwMCkgLSBrYy50b2tlblBhcnNlZC5pYXQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChrYy50aW1lU2tldyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbG9nSW5mbygnW0tFWUNMT0FLXSBFc3RpbWF0ZWQgdGltZSBkaWZmZXJlbmNlIGJldHdlZW4gYnJvd3NlciBhbmQgc2VydmVyIGlzICcgKyBrYy50aW1lU2tldyArICcgc2Vjb25kcycpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGtjLm9uVG9rZW5FeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBleHBpcmVzSW4gPSAoa2MudG9rZW5QYXJzZWRbJ2V4cCddIC0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCkgKyBrYy50aW1lU2tldykgKiAxMDAwO1xuICAgICAgICAgICAgICAgICAgICBsb2dJbmZvKCdbS0VZQ0xPQUtdIFRva2VuIGV4cGlyZXMgaW4gJyArIE1hdGgucm91bmQoZXhwaXJlc0luIC8gMTAwMCkgKyAnIHMnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cGlyZXNJbiA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrYy5vblRva2VuRXhwaXJlZCgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAga2MudG9rZW5UaW1lb3V0SGFuZGxlID0gc2V0VGltZW91dChrYy5vblRva2VuRXhwaXJlZCwgZXhwaXJlc0luKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSBrYy50b2tlbjtcbiAgICAgICAgICAgIGRlbGV0ZSBrYy50b2tlblBhcnNlZDtcbiAgICAgICAgICAgIGRlbGV0ZSBrYy5zdWJqZWN0O1xuICAgICAgICAgICAgZGVsZXRlIGtjLnJlYWxtQWNjZXNzO1xuICAgICAgICAgICAgZGVsZXRlIGtjLnJlc291cmNlQWNjZXNzO1xuXG4gICAgICAgICAgICBrYy5hdXRoZW50aWNhdGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVVVUlEKCkge1xuICAgICAgICB2YXIgaGV4RGlnaXRzID0gJzAxMjM0NTY3ODlhYmNkZWYnO1xuICAgICAgICB2YXIgcyA9IGdlbmVyYXRlUmFuZG9tU3RyaW5nKDM2LCBoZXhEaWdpdHMpLnNwbGl0KFwiXCIpO1xuICAgICAgICBzWzE0XSA9ICc0JztcbiAgICAgICAgc1sxOV0gPSBoZXhEaWdpdHMuc3Vic3RyKChzWzE5XSAmIDB4MykgfCAweDgsIDEpO1xuICAgICAgICBzWzhdID0gc1sxM10gPSBzWzE4XSA9IHNbMjNdID0gJy0nO1xuICAgICAgICB2YXIgdXVpZCA9IHMuam9pbignJyk7XG4gICAgICAgIHJldHVybiB1dWlkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlQ2FsbGJhY2sodXJsKSB7XG4gICAgICAgIHZhciBvYXV0aCA9IHBhcnNlQ2FsbGJhY2tVcmwodXJsKTtcbiAgICAgICAgaWYgKCFvYXV0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG9hdXRoU3RhdGUgPSBjYWxsYmFja1N0b3JhZ2UuZ2V0KG9hdXRoLnN0YXRlKTtcblxuICAgICAgICBpZiAob2F1dGhTdGF0ZSkge1xuICAgICAgICAgICAgb2F1dGgudmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgb2F1dGgucmVkaXJlY3RVcmkgPSBvYXV0aFN0YXRlLnJlZGlyZWN0VXJpO1xuICAgICAgICAgICAgb2F1dGguc3RvcmVkTm9uY2UgPSBvYXV0aFN0YXRlLm5vbmNlO1xuICAgICAgICAgICAgb2F1dGgucHJvbXB0ID0gb2F1dGhTdGF0ZS5wcm9tcHQ7XG4gICAgICAgICAgICBvYXV0aC5wa2NlQ29kZVZlcmlmaWVyID0gb2F1dGhTdGF0ZS5wa2NlQ29kZVZlcmlmaWVyO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9hdXRoO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlQ2FsbGJhY2tVcmwodXJsKSB7XG4gICAgICAgIHZhciBzdXBwb3J0ZWRQYXJhbXM7XG4gICAgICAgIHN3aXRjaCAoa2MuZmxvdykge1xuICAgICAgICAgICAgY2FzZSAnc3RhbmRhcmQnOlxuICAgICAgICAgICAgICAgIHN1cHBvcnRlZFBhcmFtcyA9IFsnY29kZScsICdzdGF0ZScsICdzZXNzaW9uX3N0YXRlJywgJ2tjX2FjdGlvbl9zdGF0dXMnLCAnaXNzJ107XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdpbXBsaWNpdCc6XG4gICAgICAgICAgICAgICAgc3VwcG9ydGVkUGFyYW1zID0gWydhY2Nlc3NfdG9rZW4nLCAndG9rZW5fdHlwZScsICdpZF90b2tlbicsICdzdGF0ZScsICdzZXNzaW9uX3N0YXRlJywgJ2V4cGlyZXNfaW4nLCAna2NfYWN0aW9uX3N0YXR1cycsICdpc3MnXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2h5YnJpZCc6XG4gICAgICAgICAgICAgICAgc3VwcG9ydGVkUGFyYW1zID0gWydhY2Nlc3NfdG9rZW4nLCAndG9rZW5fdHlwZScsICdpZF90b2tlbicsICdjb2RlJywgJ3N0YXRlJywgJ3Nlc3Npb25fc3RhdGUnLCAnZXhwaXJlc19pbicsICdrY19hY3Rpb25fc3RhdHVzJywgJ2lzcyddO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwcG9ydGVkUGFyYW1zLnB1c2goJ2Vycm9yJyk7XG4gICAgICAgIHN1cHBvcnRlZFBhcmFtcy5wdXNoKCdlcnJvcl9kZXNjcmlwdGlvbicpO1xuICAgICAgICBzdXBwb3J0ZWRQYXJhbXMucHVzaCgnZXJyb3JfdXJpJyk7XG5cbiAgICAgICAgdmFyIHF1ZXJ5SW5kZXggPSB1cmwuaW5kZXhPZignPycpO1xuICAgICAgICB2YXIgZnJhZ21lbnRJbmRleCA9IHVybC5pbmRleE9mKCcjJyk7XG5cbiAgICAgICAgdmFyIG5ld1VybDtcbiAgICAgICAgdmFyIHBhcnNlZDtcblxuICAgICAgICBpZiAoa2MucmVzcG9uc2VNb2RlID09PSAncXVlcnknICYmIHF1ZXJ5SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBuZXdVcmwgPSB1cmwuc3Vic3RyaW5nKDAsIHF1ZXJ5SW5kZXgpO1xuICAgICAgICAgICAgcGFyc2VkID0gcGFyc2VDYWxsYmFja1BhcmFtcyh1cmwuc3Vic3RyaW5nKHF1ZXJ5SW5kZXggKyAxLCBmcmFnbWVudEluZGV4ICE9PSAtMSA/IGZyYWdtZW50SW5kZXggOiB1cmwubGVuZ3RoKSwgc3VwcG9ydGVkUGFyYW1zKTtcbiAgICAgICAgICAgIGlmIChwYXJzZWQucGFyYW1zU3RyaW5nICE9PSAnJykge1xuICAgICAgICAgICAgICAgIG5ld1VybCArPSAnPycgKyBwYXJzZWQucGFyYW1zU3RyaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZyYWdtZW50SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbmV3VXJsICs9IHVybC5zdWJzdHJpbmcoZnJhZ21lbnRJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoa2MucmVzcG9uc2VNb2RlID09PSAnZnJhZ21lbnQnICYmIGZyYWdtZW50SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBuZXdVcmwgPSB1cmwuc3Vic3RyaW5nKDAsIGZyYWdtZW50SW5kZXgpO1xuICAgICAgICAgICAgcGFyc2VkID0gcGFyc2VDYWxsYmFja1BhcmFtcyh1cmwuc3Vic3RyaW5nKGZyYWdtZW50SW5kZXggKyAxKSwgc3VwcG9ydGVkUGFyYW1zKTtcbiAgICAgICAgICAgIGlmIChwYXJzZWQucGFyYW1zU3RyaW5nICE9PSAnJykge1xuICAgICAgICAgICAgICAgIG5ld1VybCArPSAnIycgKyBwYXJzZWQucGFyYW1zU3RyaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhcnNlZCAmJiBwYXJzZWQub2F1dGhQYXJhbXMpIHtcbiAgICAgICAgICAgIGlmIChrYy5mbG93ID09PSAnc3RhbmRhcmQnIHx8IGtjLmZsb3cgPT09ICdoeWJyaWQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKChwYXJzZWQub2F1dGhQYXJhbXMuY29kZSB8fCBwYXJzZWQub2F1dGhQYXJhbXMuZXJyb3IpICYmIHBhcnNlZC5vYXV0aFBhcmFtcy5zdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWQub2F1dGhQYXJhbXMubmV3VXJsID0gbmV3VXJsO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkLm9hdXRoUGFyYW1zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoa2MuZmxvdyA9PT0gJ2ltcGxpY2l0Jykge1xuICAgICAgICAgICAgICAgIGlmICgocGFyc2VkLm9hdXRoUGFyYW1zLmFjY2Vzc190b2tlbiB8fCBwYXJzZWQub2F1dGhQYXJhbXMuZXJyb3IpICYmIHBhcnNlZC5vYXV0aFBhcmFtcy5zdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWQub2F1dGhQYXJhbXMubmV3VXJsID0gbmV3VXJsO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkLm9hdXRoUGFyYW1zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlQ2FsbGJhY2tQYXJhbXMocGFyYW1zU3RyaW5nLCBzdXBwb3J0ZWRQYXJhbXMpIHtcbiAgICAgICAgdmFyIHAgPSBwYXJhbXNTdHJpbmcuc3BsaXQoJyYnKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHtcbiAgICAgICAgICAgIHBhcmFtc1N0cmluZzogJycsXG4gICAgICAgICAgICBvYXV0aFBhcmFtczoge31cbiAgICAgICAgfTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc3BsaXQgPSBwW2ldLmluZGV4T2YoXCI9XCIpO1xuICAgICAgICAgICAgdmFyIGtleSA9IHBbaV0uc2xpY2UoMCwgc3BsaXQpO1xuICAgICAgICAgICAgaWYgKHN1cHBvcnRlZFBhcmFtcy5pbmRleE9mKGtleSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Lm9hdXRoUGFyYW1zW2tleV0gPSBwW2ldLnNsaWNlKHNwbGl0ICsgMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucGFyYW1zU3RyaW5nICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucGFyYW1zU3RyaW5nICs9ICcmJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0LnBhcmFtc1N0cmluZyArPSBwW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlUHJvbWlzZSgpIHtcbiAgICAgICAgLy8gTmVlZCB0byBjcmVhdGUgYSBuYXRpdmUgUHJvbWlzZSB3aGljaCBhbHNvIHByZXNlcnZlcyB0aGVcbiAgICAgICAgLy8gaW50ZXJmYWNlIG9mIHRoZSBjdXN0b20gcHJvbWlzZSB0eXBlIHByZXZpb3VzbHkgdXNlZCBieSB0aGUgQVBJXG4gICAgICAgIHZhciBwID0ge1xuICAgICAgICAgICAgc2V0U3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgcC5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBzZXRFcnJvcjogZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgcC5yZWplY3QocmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcC5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBwLnJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgcC5yZWplY3QgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwO1xuICAgIH1cblxuICAgIC8vIEZ1bmN0aW9uIHRvIGV4dGVuZCBleGlzdGluZyBuYXRpdmUgUHJvbWlzZSB3aXRoIHRpbWVvdXRcbiAgICBmdW5jdGlvbiBhcHBseVRpbWVvdXRUb1Byb21pc2UocHJvbWlzZSwgdGltZW91dCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIHZhciB0aW1lb3V0SGFuZGxlID0gbnVsbDtcbiAgICAgICAgdmFyIHRpbWVvdXRQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdGltZW91dEhhbmRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJlamVjdCh7IFwiZXJyb3JcIjogZXJyb3JNZXNzYWdlIHx8IFwiUHJvbWlzZSBpcyBub3Qgc2V0dGxlZCB3aXRoaW4gdGltZW91dCBvZiBcIiArIHRpbWVvdXQgKyBcIm1zXCIgfSk7XG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmFjZShbcHJvbWlzZSwgdGltZW91dFByb21pc2VdKS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SGFuZGxlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0dXBDaGVja0xvZ2luSWZyYW1lKCkge1xuICAgICAgICB2YXIgcHJvbWlzZSA9IGNyZWF0ZVByb21pc2UoKTtcblxuICAgICAgICBpZiAoIWxvZ2luSWZyYW1lLmVuYWJsZSkge1xuICAgICAgICAgICAgcHJvbWlzZS5zZXRTdWNjZXNzKCk7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxvZ2luSWZyYW1lLmlmcmFtZSkge1xuICAgICAgICAgICAgcHJvbWlzZS5zZXRTdWNjZXNzKCk7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgICAgICBsb2dpbklmcmFtZS5pZnJhbWUgPSBpZnJhbWU7XG5cbiAgICAgICAgaWZyYW1lLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGF1dGhVcmwgPSBrYy5lbmRwb2ludHMuYXV0aG9yaXplKCk7XG4gICAgICAgICAgICBpZiAoYXV0aFVybC5jaGFyQXQoMCkgPT09ICcvJykge1xuICAgICAgICAgICAgICAgIGxvZ2luSWZyYW1lLmlmcmFtZU9yaWdpbiA9IGdldE9yaWdpbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2dpbklmcmFtZS5pZnJhbWVPcmlnaW4gPSBhdXRoVXJsLnN1YnN0cmluZygwLCBhdXRoVXJsLmluZGV4T2YoJy8nLCA4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9taXNlLnNldFN1Y2Nlc3MoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgc3JjID0ga2MuZW5kcG9pbnRzLmNoZWNrU2Vzc2lvbklmcmFtZSgpO1xuICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzcmMnLCBzcmMgKTtcbiAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc2FuZGJveCcsICdhbGxvdy1zdG9yYWdlLWFjY2Vzcy1ieS11c2VyLWFjdGl2YXRpb24gYWxsb3ctc2NyaXB0cyBhbGxvdy1zYW1lLW9yaWdpbicpO1xuICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCd0aXRsZScsICdrZXljbG9hay1zZXNzaW9uLWlmcmFtZScgKTtcbiAgICAgICAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblxuICAgICAgICB2YXIgbWVzc2FnZUNhbGxiYWNrID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICgoZXZlbnQub3JpZ2luICE9PSBsb2dpbklmcmFtZS5pZnJhbWVPcmlnaW4pIHx8IChsb2dpbklmcmFtZS5pZnJhbWUuY29udGVudFdpbmRvdyAhPT0gZXZlbnQuc291cmNlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCEoZXZlbnQuZGF0YSA9PSAndW5jaGFuZ2VkJyB8fCBldmVudC5kYXRhID09ICdjaGFuZ2VkJyB8fCBldmVudC5kYXRhID09ICdlcnJvcicpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGlmIChldmVudC5kYXRhICE9ICd1bmNoYW5nZWQnKSB7XG4gICAgICAgICAgICAgICAga2MuY2xlYXJUb2tlbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2tzID0gbG9naW5JZnJhbWUuY2FsbGJhY2tMaXN0LnNwbGljZSgwLCBsb2dpbklmcmFtZS5jYWxsYmFja0xpc3QubGVuZ3RoKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGNhbGxiYWNrcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gY2FsbGJhY2tzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhID09ICdlcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5zZXRFcnJvcigpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2Uuc2V0U3VjY2VzcyhldmVudC5kYXRhID09ICd1bmNoYW5nZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBtZXNzYWdlQ2FsbGJhY2ssIGZhbHNlKTtcblxuICAgICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlQ2hlY2tJZnJhbWUoKSB7XG4gICAgICAgIGlmIChsb2dpbklmcmFtZS5lbmFibGUpIHtcbiAgICAgICAgICAgIGlmIChrYy50b2tlbikge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrTG9naW5JZnJhbWUoKS50aGVuKGZ1bmN0aW9uKHVuY2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVuY2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlQ2hlY2tJZnJhbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSwgbG9naW5JZnJhbWUuaW50ZXJ2YWwgKiAxMDAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoZWNrTG9naW5JZnJhbWUoKSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gY3JlYXRlUHJvbWlzZSgpO1xuXG4gICAgICAgIGlmIChsb2dpbklmcmFtZS5pZnJhbWUgJiYgbG9naW5JZnJhbWUuaWZyYW1lT3JpZ2luICkge1xuICAgICAgICAgICAgdmFyIG1zZyA9IGtjLmNsaWVudElkICsgJyAnICsgKGtjLnNlc3Npb25JZCA/IGtjLnNlc3Npb25JZCA6ICcnKTtcbiAgICAgICAgICAgIGxvZ2luSWZyYW1lLmNhbGxiYWNrTGlzdC5wdXNoKHByb21pc2UpO1xuICAgICAgICAgICAgdmFyIG9yaWdpbiA9IGxvZ2luSWZyYW1lLmlmcmFtZU9yaWdpbjtcbiAgICAgICAgICAgIGlmIChsb2dpbklmcmFtZS5jYWxsYmFja0xpc3QubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgICBsb2dpbklmcmFtZS5pZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZShtc2csIG9yaWdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9taXNlLnNldFN1Y2Nlc3MoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwcm9taXNlLnByb21pc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2hlY2szcENvb2tpZXNTdXBwb3J0ZWQoKSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gY3JlYXRlUHJvbWlzZSgpO1xuXG4gICAgICAgIGlmIChsb2dpbklmcmFtZS5lbmFibGUgfHwga2Muc2lsZW50Q2hlY2tTc29SZWRpcmVjdFVyaSkge1xuICAgICAgICAgICAgdmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgICAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3JjJywga2MuZW5kcG9pbnRzLnRoaXJkUGFydHlDb29raWVzSWZyYW1lKCkpO1xuICAgICAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc2FuZGJveCcsICdhbGxvdy1zdG9yYWdlLWFjY2Vzcy1ieS11c2VyLWFjdGl2YXRpb24gYWxsb3ctc2NyaXB0cyBhbGxvdy1zYW1lLW9yaWdpbicpO1xuICAgICAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgndGl0bGUnLCAna2V5Y2xvYWstM3AtY2hlY2staWZyYW1lJyApO1xuICAgICAgICAgICAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7XG5cbiAgICAgICAgICAgIHZhciBtZXNzYWdlQ2FsbGJhY2sgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChpZnJhbWUuY29udGVudFdpbmRvdyAhPT0gZXZlbnQuc291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YSAhPT0gXCJzdXBwb3J0ZWRcIiAmJiBldmVudC5kYXRhICE9PSBcInVuc3VwcG9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuZGF0YSA9PT0gXCJ1bnN1cHBvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ1dhcm4oXG4gICAgICAgICAgICAgICAgICAgICAgICBcIltLRVlDTE9BS10gWW91ciBicm93c2VyIGlzIGJsb2NraW5nIGFjY2VzcyB0byAzcmQtcGFydHkgY29va2llcywgdGhpcyBtZWFuczpcXG5cXG5cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIiAtIEl0IGlzIG5vdCBwb3NzaWJsZSB0byByZXRyaWV2ZSB0b2tlbnMgd2l0aG91dCByZWRpcmVjdGluZyB0byB0aGUgS2V5Y2xvYWsgc2VydmVyIChhLmsuYS4gbm8gc3VwcG9ydCBmb3Igc2lsZW50IGF1dGhlbnRpY2F0aW9uKS5cXG5cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIiAtIEl0IGlzIG5vdCBwb3NzaWJsZSB0byBhdXRvbWF0aWNhbGx5IGRldGVjdCBjaGFuZ2VzIHRvIHRoZSBzZXNzaW9uIHN0YXR1cyAoc3VjaCBhcyB0aGUgdXNlciBsb2dnaW5nIG91dCBpbiBhbm90aGVyIHRhYikuXFxuXFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJGb3IgbW9yZSBpbmZvcm1hdGlvbiBzZWU6IGh0dHBzOi8vd3d3LmtleWNsb2FrLm9yZy9kb2NzL2xhdGVzdC9zZWN1cmluZ19hcHBzLyNfbW9kZXJuX2Jyb3dzZXJzXCJcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICBsb2dpbklmcmFtZS5lbmFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtjLnNpbGVudENoZWNrU3NvRmFsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtjLnNpbGVudENoZWNrU3NvUmVkaXJlY3RVcmkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgbWVzc2FnZUNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICBwcm9taXNlLnNldFN1Y2Nlc3MoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbWVzc2FnZUNhbGxiYWNrLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9taXNlLnNldFN1Y2Nlc3MoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhcHBseVRpbWVvdXRUb1Byb21pc2UocHJvbWlzZS5wcm9taXNlLCBrYy5tZXNzYWdlUmVjZWl2ZVRpbWVvdXQsIFwiVGltZW91dCB3aGVuIHdhaXRpbmcgZm9yIDNyZCBwYXJ0eSBjaGVjayBpZnJhbWUgbWVzc2FnZS5cIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZEFkYXB0ZXIodHlwZSkge1xuICAgICAgICBpZiAoIXR5cGUgfHwgdHlwZSA9PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbG9naW46IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbihrYy5jcmVhdGVMb2dpblVybChvcHRpb25zKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVQcm9taXNlKCkucHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgbG9nb3V0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGtjLmNyZWF0ZUxvZ291dFVybChvcHRpb25zKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVQcm9taXNlKCkucHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgcmVnaXN0ZXI6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbihrYy5jcmVhdGVSZWdpc3RlclVybChvcHRpb25zKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVQcm9taXNlKCkucHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgYWNjb3VudE1hbmFnZW1lbnQgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjY291bnRVcmwgPSBrYy5jcmVhdGVBY2NvdW50VXJsKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYWNjb3VudFVybCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYWNjb3VudFVybDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFwiTm90IHN1cHBvcnRlZCBieSB0aGUgT0lEQyBzZXJ2ZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlUHJvbWlzZSgpLnByb21pc2U7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIHJlZGlyZWN0VXJpOiBmdW5jdGlvbihvcHRpb25zLCBlbmNvZGVIYXNoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5yZWRpcmVjdFVyaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMucmVkaXJlY3RVcmk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2MucmVkaXJlY3RVcmkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrYy5yZWRpcmVjdFVyaTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5ocmVmO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlID09ICdjb3Jkb3ZhJykge1xuICAgICAgICAgICAgbG9naW5JZnJhbWUuZW5hYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgY29yZG92YU9wZW5XaW5kb3dXcmFwcGVyID0gZnVuY3Rpb24obG9naW5VcmwsIHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuY29yZG92YSAmJiB3aW5kb3cuY29yZG92YS5JbkFwcEJyb3dzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIGluYXBwYnJvd3NlciBmb3IgSU9TIGFuZCBBbmRyb2lkIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LmNvcmRvdmEuSW5BcHBCcm93c2VyLm9wZW4obG9naW5VcmwsIHRhcmdldCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5vcGVuKGxvZ2luVXJsLCB0YXJnZXQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBzaGFsbG93Q2xvbmVDb3Jkb3ZhT3B0aW9ucyA9IGZ1bmN0aW9uICh1c2VyT3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmICh1c2VyT3B0aW9ucyAmJiB1c2VyT3B0aW9ucy5jb3Jkb3ZhT3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModXNlck9wdGlvbnMuY29yZG92YU9wdGlvbnMpLnJlZHVjZShmdW5jdGlvbiAob3B0aW9ucywgb3B0aW9uTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1tvcHRpb25OYW1lXSA9IHVzZXJPcHRpb25zLmNvcmRvdmFPcHRpb25zW29wdGlvbk5hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgICAgICAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGZvcm1hdENvcmRvdmFPcHRpb25zID0gZnVuY3Rpb24gKGNvcmRvdmFPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGNvcmRvdmFPcHRpb25zKS5yZWR1Y2UoZnVuY3Rpb24gKG9wdGlvbnMsIG9wdGlvbk5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKG9wdGlvbk5hbWUrXCI9XCIrY29yZG92YU9wdGlvbnNbb3B0aW9uTmFtZV0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICAgICAgICAgICAgICB9LCBbXSkuam9pbihcIixcIik7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgY3JlYXRlQ29yZG92YU9wdGlvbnMgPSBmdW5jdGlvbiAodXNlck9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29yZG92YU9wdGlvbnMgPSBzaGFsbG93Q2xvbmVDb3Jkb3ZhT3B0aW9ucyh1c2VyT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgY29yZG92YU9wdGlvbnMubG9jYXRpb24gPSAnbm8nO1xuICAgICAgICAgICAgICAgIGlmICh1c2VyT3B0aW9ucyAmJiB1c2VyT3B0aW9ucy5wcm9tcHQgPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvcmRvdmFPcHRpb25zLmhpZGRlbiA9ICd5ZXMnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0Q29yZG92YU9wdGlvbnMoY29yZG92YU9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGdldENvcmRvdmFSZWRpcmVjdFVyaSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBrYy5yZWRpcmVjdFVyaSB8fCAnaHR0cDovL2xvY2FsaG9zdCc7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGxvZ2luOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gY3JlYXRlUHJvbWlzZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3Jkb3ZhT3B0aW9ucyA9IGNyZWF0ZUNvcmRvdmFPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG9naW5VcmwgPSBrYy5jcmVhdGVMb2dpblVybChvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlZiA9IGNvcmRvdmFPcGVuV2luZG93V3JhcHBlcihsb2dpblVybCwgJ19ibGFuaycsIGNvcmRvdmFPcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBsZXRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsb3NlQnJvd3NlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHJlZi5hZGRFdmVudExpc3RlbmVyKCdsb2Fkc3RhcnQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnVybC5pbmRleE9mKGdldENvcmRvdmFSZWRpcmVjdFVyaSgpKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gcGFyc2VDYWxsYmFjayhldmVudC51cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NDYWxsYmFjayhjYWxsYmFjaywgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VCcm93c2VyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVmLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlcnJvcicsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC51cmwuaW5kZXhPZihnZXRDb3Jkb3ZhUmVkaXJlY3RVcmkoKSkgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBwYXJzZUNhbGxiYWNrKGV2ZW50LnVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NDYWxsYmFjayhjYWxsYmFjaywgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlQnJvd3NlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2Uuc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VCcm93c2VyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICByZWYuYWRkRXZlbnRMaXN0ZW5lcignZXhpdCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2Uuc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IFwiY2xvc2VkX2J5X3VzZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBsb2dvdXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBjcmVhdGVQcm9taXNlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvZ291dFVybCA9IGtjLmNyZWF0ZUxvZ291dFVybChvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlZiA9IGNvcmRvdmFPcGVuV2luZG93V3JhcHBlcihsb2dvdXRVcmwsICdfYmxhbmsnLCAnbG9jYXRpb249bm8saGlkZGVuPXllcyxjbGVhcmNhY2hlPXllcycpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvcjtcblxuICAgICAgICAgICAgICAgICAgICByZWYuYWRkRXZlbnRMaXN0ZW5lcignbG9hZHN0YXJ0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC51cmwuaW5kZXhPZihnZXRDb3Jkb3ZhUmVkaXJlY3RVcmkoKSkgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICByZWYuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVycm9yJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC51cmwuaW5kZXhPZihnZXRDb3Jkb3ZhUmVkaXJlY3RVcmkoKSkgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlZi5hZGRFdmVudExpc3RlbmVyKCdleGl0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2Uuc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2MuY2xlYXJUb2tlbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2Uuc2V0U3VjY2VzcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICByZWdpc3RlciA6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBjcmVhdGVQcm9taXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWdpc3RlclVybCA9IGtjLmNyZWF0ZVJlZ2lzdGVyVXJsKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3Jkb3ZhT3B0aW9ucyA9IGNyZWF0ZUNvcmRvdmFPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVmID0gY29yZG92YU9wZW5XaW5kb3dXcmFwcGVyKHJlZ2lzdGVyVXJsLCAnX2JsYW5rJywgY29yZG92YU9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICByZWYuYWRkRXZlbnRMaXN0ZW5lcignbG9hZHN0YXJ0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC51cmwuaW5kZXhPZihnZXRDb3Jkb3ZhUmVkaXJlY3RVcmkoKSkgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYXV0aCA9IHBhcnNlQ2FsbGJhY2soZXZlbnQudXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzQ2FsbGJhY2sob2F1dGgsIHByb21pc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UucHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgYWNjb3VudE1hbmFnZW1lbnQgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjY291bnRVcmwgPSBrYy5jcmVhdGVBY2NvdW50VXJsKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYWNjb3VudFVybCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWYgPSBjb3Jkb3ZhT3BlbldpbmRvd1dyYXBwZXIoYWNjb3VudFVybCwgJ19ibGFuaycsICdsb2NhdGlvbj1ubycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRzdGFydCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnVybC5pbmRleE9mKGdldENvcmRvdmFSZWRpcmVjdFVyaSgpKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJOb3Qgc3VwcG9ydGVkIGJ5IHRoZSBPSURDIHNlcnZlclwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIHJlZGlyZWN0VXJpOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRDb3Jkb3ZhUmVkaXJlY3RVcmkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZSA9PSAnY29yZG92YS1uYXRpdmUnKSB7XG4gICAgICAgICAgICBsb2dpbklmcmFtZS5lbmFibGUgPSBmYWxzZTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBsb2dpbjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IGNyZWF0ZVByb21pc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvZ2luVXJsID0ga2MuY3JlYXRlTG9naW5Vcmwob3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdW5pdmVyc2FsTGlua3Muc3Vic2NyaWJlKCdrZXljbG9haycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bml2ZXJzYWxMaW5rcy51bnN1YnNjcmliZSgna2V5Y2xvYWsnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb3Jkb3ZhLnBsdWdpbnMuYnJvd3NlcnRhYi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9hdXRoID0gcGFyc2VDYWxsYmFjayhldmVudC51cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0NhbGxiYWNrKG9hdXRoLCBwcm9taXNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvcmRvdmEucGx1Z2lucy5icm93c2VydGFiLm9wZW5VcmwobG9naW5VcmwpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBsb2dvdXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBjcmVhdGVQcm9taXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2dvdXRVcmwgPSBrYy5jcmVhdGVMb2dvdXRVcmwob3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdW5pdmVyc2FsTGlua3Muc3Vic2NyaWJlKCdrZXljbG9haycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bml2ZXJzYWxMaW5rcy51bnN1YnNjcmliZSgna2V5Y2xvYWsnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb3Jkb3ZhLnBsdWdpbnMuYnJvd3NlcnRhYi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAga2MuY2xlYXJUb2tlbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5zZXRTdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb3Jkb3ZhLnBsdWdpbnMuYnJvd3NlcnRhYi5vcGVuVXJsKGxvZ291dFVybCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlLnByb21pc2U7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIHJlZ2lzdGVyIDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IGNyZWF0ZVByb21pc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlZ2lzdGVyVXJsID0ga2MuY3JlYXRlUmVnaXN0ZXJVcmwob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIHVuaXZlcnNhbExpbmtzLnN1YnNjcmliZSgna2V5Y2xvYWsnICwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaXZlcnNhbExpbmtzLnVuc3Vic2NyaWJlKCdrZXljbG9haycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvcmRvdmEucGx1Z2lucy5icm93c2VydGFiLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2F1dGggPSBwYXJzZUNhbGxiYWNrKGV2ZW50LnVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzQ2FsbGJhY2sob2F1dGgsIHByb21pc2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNvcmRvdmEucGx1Z2lucy5icm93c2VydGFiLm9wZW5VcmwocmVnaXN0ZXJVcmwpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuXG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIGFjY291bnRNYW5hZ2VtZW50IDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhY2NvdW50VXJsID0ga2MuY3JlYXRlQWNjb3VudFVybCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFjY291bnRVcmwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29yZG92YS5wbHVnaW5zLmJyb3dzZXJ0YWIub3BlblVybChhY2NvdW50VXJsKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IFwiTm90IHN1cHBvcnRlZCBieSB0aGUgT0lEQyBzZXJ2ZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICByZWRpcmVjdFVyaTogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnJlZGlyZWN0VXJpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5yZWRpcmVjdFVyaTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChrYy5yZWRpcmVjdFVyaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtjLnJlZGlyZWN0VXJpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiaHR0cDovL2xvY2FsaG9zdFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgJ2ludmFsaWQgYWRhcHRlciB0eXBlOiAnICsgdHlwZTtcbiAgICB9XG5cbiAgICB2YXIgTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBMb2NhbFN0b3JhZ2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IExvY2FsU3RvcmFnZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2tjLXRlc3QnLCAndGVzdCcpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgna2MtdGVzdCcpO1xuXG4gICAgICAgIHZhciBjcyA9IHRoaXM7XG5cbiAgICAgICAgZnVuY3Rpb24gY2xlYXJFeHBpcmVkKCkge1xuICAgICAgICAgICAgdmFyIHRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKSAge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBsb2NhbFN0b3JhZ2Uua2V5KGkpO1xuICAgICAgICAgICAgICAgIGlmIChrZXkgJiYga2V5LmluZGV4T2YoJ2tjLWNhbGxiYWNrLScpID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHBpcmVzID0gSlNPTi5wYXJzZSh2YWx1ZSkuZXhwaXJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV4cGlyZXMgfHwgZXhwaXJlcyA8IHRpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY3MuZ2V0ID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgICAgIGlmICghc3RhdGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBrZXkgPSAna2MtY2FsbGJhY2stJyArIHN0YXRlO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2xlYXJFeHBpcmVkKCk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgY3MuYWRkID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgICAgIGNsZWFyRXhwaXJlZCgpO1xuXG4gICAgICAgICAgICB2YXIga2V5ID0gJ2tjLWNhbGxiYWNrLScgKyBzdGF0ZS5zdGF0ZTtcbiAgICAgICAgICAgIHN0YXRlLmV4cGlyZXMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArICg2MCAqIDYwICogMTAwMCk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHN0YXRlKSk7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIHZhciBDb29raWVTdG9yYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBDb29raWVTdG9yYWdlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb29raWVTdG9yYWdlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY3MgPSB0aGlzO1xuXG4gICAgICAgIGNzLmdldCA9IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICAgICAgICBpZiAoIXN0YXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBnZXRDb29raWUoJ2tjLWNhbGxiYWNrLScgKyBzdGF0ZSk7XG4gICAgICAgICAgICBzZXRDb29raWUoJ2tjLWNhbGxiYWNrLScgKyBzdGF0ZSwgJycsIGNvb2tpZUV4cGlyYXRpb24oLTEwMCkpO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNzLmFkZCA9IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICAgICAgICBzZXRDb29raWUoJ2tjLWNhbGxiYWNrLScgKyBzdGF0ZS5zdGF0ZSwgSlNPTi5zdHJpbmdpZnkoc3RhdGUpLCBjb29raWVFeHBpcmF0aW9uKDYwKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY3MucmVtb3ZlSXRlbSA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgc2V0Q29va2llKGtleSwgJycsIGNvb2tpZUV4cGlyYXRpb24oLTEwMCkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBjb29raWVFeHBpcmF0aW9uID0gZnVuY3Rpb24gKG1pbnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciBleHAgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgZXhwLnNldFRpbWUoZXhwLmdldFRpbWUoKSArIChtaW51dGVzKjYwKjEwMDApKTtcbiAgICAgICAgICAgIHJldHVybiBleHA7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGdldENvb2tpZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0ga2V5ICsgJz0nO1xuICAgICAgICAgICAgdmFyIGNhID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGMgPSBjYVtpXTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCkgPT0gJyAnKSB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBjLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGMuaW5kZXhPZihuYW1lKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjLnN1YnN0cmluZyhuYW1lLmxlbmd0aCwgYy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgc2V0Q29va2llID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIGV4cGlyYXRpb25EYXRlKSB7XG4gICAgICAgICAgICB2YXIgY29va2llID0ga2V5ICsgJz0nICsgdmFsdWUgKyAnOyAnXG4gICAgICAgICAgICAgICAgKyAnZXhwaXJlcz0nICsgZXhwaXJhdGlvbkRhdGUudG9VVENTdHJpbmcoKSArICc7ICc7XG4gICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWU7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNhbGxiYWNrU3RvcmFnZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTG9jYWxTdG9yYWdlKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBDb29raWVTdG9yYWdlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlTG9nZ2VyKGZuKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChrYy5lbmFibGVMb2dnaW5nKSB7XG4gICAgICAgICAgICAgICAgZm4uYXBwbHkoY29uc29sZSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuXG5leHBvcnQgeyBLZXljbG9hayBhcyBkZWZhdWx0IH07XG4iXSwibmFtZXMiOlsiYmFzZTY0Iiwic2hhMjU2Iiwiand0RGVjb2RlIiwiUHJvbWlzZSIsIkVycm9yIiwiS2V5Y2xvYWsiLCJjb25maWciLCJrYyIsImFkYXB0ZXIiLCJyZWZyZXNoUXVldWUiLCJjYWxsYmFja1N0b3JhZ2UiLCJsb2dpbklmcmFtZSIsImVuYWJsZSIsImNhbGxiYWNrTGlzdCIsImludGVydmFsIiwic2NyaXB0cyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpIiwibGVuZ3RoIiwic3JjIiwiaW5kZXhPZiIsImlmcmFtZVZlcnNpb24iLCJzdWJzdHJpbmciLCJzcGxpdCIsInVzZU5vbmNlIiwibG9nSW5mbyIsImNyZWF0ZUxvZ2dlciIsImNvbnNvbGUiLCJpbmZvIiwibG9nV2FybiIsIndhcm4iLCJpbml0IiwiaW5pdE9wdGlvbnMiLCJkaWRJbml0aWFsaXplIiwiYXV0aGVudGljYXRlZCIsImNyZWF0ZUNhbGxiYWNrU3RvcmFnZSIsImFkYXB0ZXJzIiwibG9hZEFkYXB0ZXIiLCJ3aW5kb3ciLCJDb3Jkb3ZhIiwiY29yZG92YSIsImNoZWNrTG9naW5JZnJhbWUiLCJjaGVja0xvZ2luSWZyYW1lSW50ZXJ2YWwiLCJvbkxvYWQiLCJsb2dpblJlcXVpcmVkIiwicmVzcG9uc2VNb2RlIiwiZmxvdyIsInJlc3BvbnNlVHlwZSIsInRpbWVTa2V3IiwicmVkaXJlY3RVcmkiLCJzaWxlbnRDaGVja1Nzb1JlZGlyZWN0VXJpIiwic2lsZW50Q2hlY2tTc29GYWxsYmFjayIsInBrY2VNZXRob2QiLCJlbmFibGVMb2dnaW5nIiwic2NvcGUiLCJhY3JWYWx1ZXMiLCJtZXNzYWdlUmVjZWl2ZVRpbWVvdXQiLCJwcm9taXNlIiwiY3JlYXRlUHJvbWlzZSIsImluaXRQcm9taXNlIiwidGhlbiIsIm9uUmVhZHkiLCJzZXRTdWNjZXNzIiwiY2F0Y2giLCJlcnJvciIsInNldEVycm9yIiwiY29uZmlnUHJvbWlzZSIsImxvYWRDb25maWciLCJkb0xvZ2luIiwicHJvbXB0Iiwib3B0aW9ucyIsImxvY2FsZSIsImxvZ2luIiwiY2hlY2tTc29TaWxlbnRseSIsImlmcm0iLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlTG9naW5VcmwiLCJzZXRBdHRyaWJ1dGUiLCJzdHlsZSIsImRpc3BsYXkiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJtZXNzYWdlQ2FsbGJhY2siLCJldmVudCIsIm9yaWdpbiIsImxvY2F0aW9uIiwiY29udGVudFdpbmRvdyIsInNvdXJjZSIsIm9hdXRoIiwicGFyc2VDYWxsYmFjayIsImRhdGEiLCJwcm9jZXNzQ2FsbGJhY2siLCJyZW1vdmVDaGlsZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0dXBDaGVja0xvZ2luSWZyYW1lIiwidW5jaGFuZ2VkIiwicHJvY2Vzc0luaXQiLCJjYWxsYmFjayIsImhyZWYiLCJoaXN0b3J5IiwicmVwbGFjZVN0YXRlIiwic3RhdGUiLCJuZXdVcmwiLCJ2YWxpZCIsInRva2VuIiwicmVmcmVzaFRva2VuIiwic2V0VG9rZW4iLCJpZFRva2VuIiwib25BdXRoU3VjY2VzcyIsInNjaGVkdWxlQ2hlY2tJZnJhbWUiLCJ1cGRhdGVUb2tlbiIsIm9uQXV0aEVycm9yIiwiZG9tUmVhZHkiLCJjaGVja1JlYWR5U3RhdGUiLCJyZWFkeVN0YXRlIiwiY2hlY2szcENvb2tpZXNTdXBwb3J0ZWQiLCJnZW5lcmF0ZVJhbmRvbURhdGEiLCJsZW4iLCJhcnJheSIsImNyeXB0byIsIm1zQ3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiVWludDhBcnJheSIsIkFycmF5IiwiaiIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImdlbmVyYXRlQ29kZVZlcmlmaWVyIiwiZ2VuZXJhdGVSYW5kb21TdHJpbmciLCJhbHBoYWJldCIsInJhbmRvbURhdGEiLCJjaGFycyIsImNoYXJDb2RlQXQiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJhcHBseSIsImdlbmVyYXRlUGtjZUNoYWxsZW5nZSIsImNvZGVWZXJpZmllciIsImhhc2hCeXRlcyIsImFycmF5QnVmZmVyIiwiZW5jb2RlZEhhc2giLCJmcm9tQnl0ZUFycmF5IiwicmVwbGFjZSIsImJ1aWxkQ2xhaW1zUGFyYW1ldGVyIiwicmVxdWVzdGVkQWNyIiwiY2xhaW1zIiwiaWRfdG9rZW4iLCJhY3IiLCJKU09OIiwic3RyaW5naWZ5IiwiY3JlYXRlVVVJRCIsIm5vbmNlIiwiY2FsbGJhY2tTdGF0ZSIsImVuY29kZVVSSUNvbXBvbmVudCIsImJhc2VVcmwiLCJhY3Rpb24iLCJlbmRwb2ludHMiLCJyZWdpc3RlciIsImF1dGhvcml6ZSIsInVybCIsImNsaWVudElkIiwibWF4QWdlIiwibG9naW5IaW50IiwiaWRwSGludCIsImNsYWltc1BhcmFtZXRlciIsInBrY2VDb2RlVmVyaWZpZXIiLCJwa2NlQ2hhbGxlbmdlIiwiYWRkIiwibG9nb3V0IiwiY3JlYXRlTG9nb3V0VXJsIiwiY3JlYXRlUmVnaXN0ZXJVcmwiLCJjcmVhdGVBY2NvdW50VXJsIiwicmVhbG0iLCJnZXRSZWFsbVVybCIsInVuZGVmaW5lZCIsImFjY291bnRNYW5hZ2VtZW50IiwiaGFzUmVhbG1Sb2xlIiwicm9sZSIsImFjY2VzcyIsInJlYWxtQWNjZXNzIiwicm9sZXMiLCJoYXNSZXNvdXJjZVJvbGUiLCJyZXNvdXJjZSIsInJlc291cmNlQWNjZXNzIiwibG9hZFVzZXJQcm9maWxlIiwicmVxIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInN0YXR1cyIsInByb2ZpbGUiLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInNlbmQiLCJsb2FkVXNlckluZm8iLCJ1c2VyaW5mbyIsInVzZXJJbmZvIiwiaXNUb2tlbkV4cGlyZWQiLCJtaW5WYWxpZGl0eSIsInRva2VuUGFyc2VkIiwiZXhwaXJlc0luIiwiY2VpbCIsIkRhdGUiLCJnZXRUaW1lIiwiaXNOYU4iLCJleGVjIiwicGFyYW1zIiwicHVzaCIsIndpdGhDcmVkZW50aWFscyIsInRpbWVMb2NhbCIsInRva2VuUmVzcG9uc2UiLCJvbkF1dGhSZWZyZXNoU3VjY2VzcyIsInAiLCJwb3AiLCJjbGVhclRva2VuIiwib25BdXRoUmVmcmVzaEVycm9yIiwiaWZyYW1lUHJvbWlzZSIsIm9uQXV0aExvZ291dCIsImF1dGhTZXJ2ZXJVcmwiLCJjaGFyQXQiLCJnZXRPcmlnaW4iLCJwcm90b2NvbCIsImhvc3RuYW1lIiwicG9ydCIsImNvZGUiLCJvbkFjdGlvblVwZGF0ZSIsImVycm9yRGF0YSIsImVycm9yX2Rlc2NyaXB0aW9uIiwiYWNjZXNzX3Rva2VuIiwiYXV0aFN1Y2Nlc3MiLCJhY2Nlc3NUb2tlbiIsImZ1bGZpbGxQcm9taXNlIiwic3RvcmVkTm9uY2UiLCJyZWZyZXNoVG9rZW5QYXJzZWQiLCJpZFRva2VuUGFyc2VkIiwiY29uZmlnVXJsIiwic2V0dXBPaWRjRW5kb2ludHMiLCJvaWRjQ29uZmlndXJhdGlvbiIsImNoZWNrU2Vzc2lvbklmcmFtZSIsInRoaXJkUGFydHlDb29raWVzSWZyYW1lIiwiYXV0aG9yaXphdGlvbl9lbmRwb2ludCIsInRva2VuX2VuZHBvaW50IiwiZW5kX3Nlc3Npb25fZW5kcG9pbnQiLCJjaGVja19zZXNzaW9uX2lmcmFtZSIsInVzZXJpbmZvX2VuZHBvaW50IiwiZmlsZUxvYWRlZCIsIm9pZGNQcm92aWRlciIsIm1hdGNoIiwic3Vic3RyIiwib2lkY1Byb3ZpZGVyQ29uZmlnVXJsIiwib2lkY1Byb3ZpZGVyQ29uZmlnIiwieGhyIiwicmVzcG9uc2VVUkwiLCJzdGFydHNXaXRoIiwidG9rZW5UaW1lb3V0SGFuZGxlIiwiY2xlYXJUaW1lb3V0Iiwic2Vzc2lvbklkIiwic2Vzc2lvbl9zdGF0ZSIsInN1YmplY3QiLCJzdWIiLCJyZWFsbV9hY2Nlc3MiLCJyZXNvdXJjZV9hY2Nlc3MiLCJpYXQiLCJvblRva2VuRXhwaXJlZCIsInJvdW5kIiwic2V0VGltZW91dCIsImhleERpZ2l0cyIsInMiLCJ1dWlkIiwiam9pbiIsInBhcnNlQ2FsbGJhY2tVcmwiLCJvYXV0aFN0YXRlIiwiZ2V0Iiwic3VwcG9ydGVkUGFyYW1zIiwicXVlcnlJbmRleCIsImZyYWdtZW50SW5kZXgiLCJwYXJzZWQiLCJwYXJzZUNhbGxiYWNrUGFyYW1zIiwicGFyYW1zU3RyaW5nIiwib2F1dGhQYXJhbXMiLCJyZXN1bHQiLCJrZXkiLCJzbGljZSIsInJlc29sdmUiLCJyZWplY3QiLCJhcHBseVRpbWVvdXRUb1Byb21pc2UiLCJ0aW1lb3V0IiwiZXJyb3JNZXNzYWdlIiwidGltZW91dEhhbmRsZSIsInRpbWVvdXRQcm9taXNlIiwicmFjZSIsImZpbmFsbHkiLCJpZnJhbWUiLCJvbmxvYWQiLCJhdXRoVXJsIiwiaWZyYW1lT3JpZ2luIiwiY2FsbGJhY2tzIiwic3BsaWNlIiwibXNnIiwicG9zdE1lc3NhZ2UiLCJ0eXBlIiwiYXNzaWduIiwiYWNjb3VudFVybCIsImVuY29kZUhhc2giLCJjb3Jkb3ZhT3BlbldpbmRvd1dyYXBwZXIiLCJsb2dpblVybCIsInRhcmdldCIsIkluQXBwQnJvd3NlciIsInNoYWxsb3dDbG9uZUNvcmRvdmFPcHRpb25zIiwidXNlck9wdGlvbnMiLCJjb3Jkb3ZhT3B0aW9ucyIsIk9iamVjdCIsImtleXMiLCJyZWR1Y2UiLCJvcHRpb25OYW1lIiwiZm9ybWF0Q29yZG92YU9wdGlvbnMiLCJjcmVhdGVDb3Jkb3ZhT3B0aW9ucyIsImhpZGRlbiIsImdldENvcmRvdmFSZWRpcmVjdFVyaSIsInJlZiIsImNvbXBsZXRlZCIsImNsb3NlZCIsImNsb3NlQnJvd3NlciIsImNsb3NlIiwicmVhc29uIiwibG9nb3V0VXJsIiwicmVnaXN0ZXJVcmwiLCJ1bml2ZXJzYWxMaW5rcyIsInN1YnNjcmliZSIsInVuc3Vic2NyaWJlIiwicGx1Z2lucyIsImJyb3dzZXJ0YWIiLCJvcGVuVXJsIiwiTG9jYWxTdG9yYWdlIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJjcyIsImNsZWFyRXhwaXJlZCIsInRpbWUiLCJ2YWx1ZSIsImdldEl0ZW0iLCJleHBpcmVzIiwiZXJyIiwiQ29va2llU3RvcmFnZSIsImdldENvb2tpZSIsInNldENvb2tpZSIsImNvb2tpZUV4cGlyYXRpb24iLCJtaW51dGVzIiwiZXhwIiwic2V0VGltZSIsIm5hbWUiLCJjYSIsImNvb2tpZSIsImMiLCJleHBpcmF0aW9uRGF0ZSIsInRvVVRDU3RyaW5nIiwiZm4iLCJwcm90b3R5cGUiLCJjYWxsIiwiYXJndW1lbnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/keycloak-js/dist/keycloak.mjs\n");

/***/ })

};
;