{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"keycloak-angular\";\nimport * as i2 from \"../../services/order.service\";\nexport class OrdersComponent {\n  constructor(keycloakService, orderService) {\n    this.keycloakService = keycloakService;\n    this.orderService = orderService;\n    this.orders = [];\n    this.loading = true;\n    this.currentPage = 1;\n    this.pageSize = 10;\n    this.totalItems = 0;\n    this.totalPages = 0;\n    this.statusFilter = '';\n    this.Math = Math;\n  }\n  ngOnInit() {\n    this.loadOrders();\n  }\n  loadOrders() {\n    this.loading = true;\n    this.orderService.getOrders({\n      page: this.currentPage,\n      limit: +this.pageSize\n    }).subscribe({\n      next: response => {\n        this.orders = this.statusFilter ? response.data.filter(o => o.status === this.statusFilter) : response.data;\n        this.totalItems = response.pagination.total;\n        this.totalPages = response.pagination.totalPages;\n        this.loading = false;\n      },\n      error: err => {\n        console.error('Failed to load orders:', err);\n        this.loading = false;\n      }\n    });\n  }\n  updateStatus(orderId, status) {\n    this.orderService.updateOrderStatus(orderId, status).subscribe({\n      next: () => {\n        this.loadOrders();\n      },\n      error: err => {\n        console.error('Failed to update order status:', err);\n        alert('Failed to update order status');\n      }\n    });\n  }\n  cancelOrder(orderId) {\n    if (!confirm('Are you sure you want to cancel this order?')) return;\n    this.orderService.cancelOrder(orderId).subscribe({\n      next: () => {\n        this.loadOrders();\n      },\n      error: err => {\n        console.error('Failed to cancel order:', err);\n        alert('Failed to cancel order');\n      }\n    });\n  }\n  goToPage(page) {\n    if (page < 1 || page > this.totalPages) return;\n    this.currentPage = page;\n    this.loadOrders();\n  }\n  getPageNumbers() {\n    const pages = [];\n    const start = Math.max(1, this.currentPage - 2);\n    const end = Math.min(this.totalPages, this.currentPage + 2);\n    for (let i = start; i <= end; i++) {\n      pages.push(i);\n    }\n    return pages;\n  }\n  getStatusClass(status) {\n    switch (status) {\n      case 'completed':\n        return 'bg-green-100 text-green-800';\n      case 'pending':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'processing':\n        return 'bg-blue-100 text-blue-800';\n      case 'cancelled':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  }\n  logout() {\n    this.keycloakService.logout();\n  }\n  static {\n    this.ɵfac = function OrdersComponent_Factory(t) {\n      return new (t || OrdersComponent)(i0.ɵɵdirectiveInject(i1.KeycloakService), i0.ɵɵdirectiveInject(i2.OrderService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: OrdersComponent,\n      selectors: [[\"app-orders\"]],\n      decls: 1,\n      vars: 0,\n      template: function OrdersComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtext(0, \"template.html\");\n        }\n      },\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["OrdersComponent","constructor","keycloakService","orderService","orders","loading","currentPage","pageSize","totalItems","totalPages","statusFilter","Math","ngOnInit","loadOrders","getOrders","page","limit","subscribe","next","response","data","filter","o","status","pagination","total","error","err","console","updateStatus","orderId","updateOrderStatus","alert","cancelOrder","confirm","goToPage","getPageNumbers","pages","start","max","end","min","i","push","getStatusClass","logout","i0","ɵɵdirectiveInject","i1","KeycloakService","i2","OrderService","selectors","decls","vars","template","OrdersComponent_Template","rf","ctx","ɵɵtext"],"sources":["D:\\MLMUPC\\new microService\\my-microservices\\frontend\\admin-web\\src\\app\\components\\orders\\orders.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { KeycloakService } from 'keycloak-angular';\nimport { OrderService } from '../../services/order.service';\nimport { Order } from '../../models';\n\n@Component({\n  selector: 'app-orders',\n  template: 'template.html',\n  styles: []\n})\nexport class OrdersComponent implements OnInit {\n  orders: Order[] = [];\n  loading = true;\n  currentPage = 1;\n  pageSize = 10;\n  totalItems = 0;\n  totalPages = 0;\n  statusFilter = '';\n  Math = Math;\n\n  constructor(\n    private keycloakService: KeycloakService,\n    private orderService: OrderService\n  ) {}\n\n  ngOnInit() {\n    this.loadOrders();\n  }\n\n  loadOrders() {\n    this.loading = true;\n    this.orderService.getOrders({ \n      page: this.currentPage, \n      limit: +this.pageSize \n    }).subscribe({\n      next: (response) => {\n        this.orders = this.statusFilter \n          ? response.data.filter(o => o.status === this.statusFilter)\n          : response.data;\n        this.totalItems = response.pagination.total;\n        this.totalPages = response.pagination.totalPages;\n        this.loading = false;\n      },\n      error: (err) => {\n        console.error('Failed to load orders:', err);\n        this.loading = false;\n      }\n    });\n  }\n\n  updateStatus(orderId: string, status: string) {\n    this.orderService.updateOrderStatus(orderId, status).subscribe({\n      next: () => {\n        this.loadOrders();\n      },\n      error: (err) => {\n        console.error('Failed to update order status:', err);\n        alert('Failed to update order status');\n      }\n    });\n  }\n\n  cancelOrder(orderId: string) {\n    if (!confirm('Are you sure you want to cancel this order?')) return;\n    \n    this.orderService.cancelOrder(orderId).subscribe({\n      next: () => {\n        this.loadOrders();\n      },\n      error: (err) => {\n        console.error('Failed to cancel order:', err);\n        alert('Failed to cancel order');\n      }\n    });\n  }\n\n  goToPage(page: number) {\n    if (page < 1 || page > this.totalPages) return;\n    this.currentPage = page;\n    this.loadOrders();\n  }\n\n  getPageNumbers(): number[] {\n    const pages: number[] = [];\n    const start = Math.max(1, this.currentPage - 2);\n    const end = Math.min(this.totalPages, this.currentPage + 2);\n    for (let i = start; i <= end; i++) {\n      pages.push(i);\n    }\n    return pages;\n  }\n\n  getStatusClass(status: string): string {\n    switch (status) {\n      case 'completed': return 'bg-green-100 text-green-800';\n      case 'pending': return 'bg-yellow-100 text-yellow-800';\n      case 'processing': return 'bg-blue-100 text-blue-800';\n      case 'cancelled': return 'bg-red-100 text-red-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  }\n\n  logout() {\n    this.keycloakService.logout();\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}