{"ast":null,"code":"import _asyncToGenerator from \"D:/MLMUPC/new microService/my-microservices/frontend/admin-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"keycloak-angular\";\nimport * as i2 from \"../../services/order.service\";\nimport * as i3 from \"../../services/payment.service\";\nimport * as i4 from \"../../services/notification.service\";\nexport class DashboardComponent {\n  constructor(keycloakService, orderService, paymentService, notificationService) {\n    this.keycloakService = keycloakService;\n    this.orderService = orderService;\n    this.paymentService = paymentService;\n    this.notificationService = notificationService;\n    this.userProfile = {};\n    this.userRoles = [];\n    this.totalOrders = 0;\n    this.totalPayments = 0;\n    this.pendingOrders = 0;\n    this.totalNotifications = 0;\n    this.recentOrders = [];\n    this.recentPayments = [];\n    this.recentNotifications = [];\n    this.loading = true;\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (yield _this.keycloakService.isLoggedIn()) {\n        _this.userProfile = yield _this.keycloakService.loadUserProfile();\n        const tokenParsed = _this.keycloakService.getKeycloakInstance().tokenParsed;\n        _this.userRoles = tokenParsed?.realm_access?.roles || [];\n        _this.loadDashboardData();\n      }\n    })();\n  }\n  loadDashboardData() {\n    this.loading = true;\n    // Load orders\n    this.orderService.getOrders({\n      page: 1,\n      limit: 5\n    }).subscribe({\n      next: response => {\n        this.recentOrders = response.data;\n        this.totalOrders = response.pagination.total;\n        this.pendingOrders = response.data.filter(o => o.status === 'pending').length;\n      },\n      error: err => console.error('Failed to load orders:', err)\n    });\n    // Load payments\n    this.paymentService.getPayments({\n      page: 1,\n      limit: 5\n    }).subscribe({\n      next: response => {\n        this.recentPayments = response.data;\n        this.totalPayments = response.pagination.total;\n      },\n      error: err => console.error('Failed to load payments:', err)\n    });\n    this.loading = false;\n  }\n  getStatusClass(status) {\n    switch (status) {\n      case 'completed':\n        return 'bg-green-100 text-green-800';\n      case 'pending':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'processing':\n        return 'bg-blue-100 text-blue-800';\n      case 'cancelled':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  }\n  getPaymentStatusClass(status) {\n    switch (status) {\n      case 'completed':\n        return 'bg-green-100 text-green-800';\n      case 'pending':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'processing':\n        return 'bg-blue-100 text-blue-800';\n      case 'failed':\n        return 'bg-red-100 text-red-800';\n      case 'refunded':\n        return 'bg-gray-100 text-gray-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  }\n  logout() {\n    this.keycloakService.logout();\n  }\n  static {\n    this.ɵfac = function DashboardComponent_Factory(t) {\n      return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.KeycloakService), i0.ɵɵdirectiveInject(i2.OrderService), i0.ɵɵdirectiveInject(i3.PaymentService), i0.ɵɵdirectiveInject(i4.NotificationService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DashboardComponent,\n      selectors: [[\"app-dashboard\"]],\n      decls: 1,\n      vars: 0,\n      template: function DashboardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtext(0, \"template.html\");\n        }\n      },\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["DashboardComponent","constructor","keycloakService","orderService","paymentService","notificationService","userProfile","userRoles","totalOrders","totalPayments","pendingOrders","totalNotifications","recentOrders","recentPayments","recentNotifications","loading","ngOnInit","_this","_asyncToGenerator","isLoggedIn","loadUserProfile","tokenParsed","getKeycloakInstance","realm_access","roles","loadDashboardData","getOrders","page","limit","subscribe","next","response","data","pagination","total","filter","o","status","length","error","err","console","getPayments","getStatusClass","getPaymentStatusClass","logout","i0","ɵɵdirectiveInject","i1","KeycloakService","i2","OrderService","i3","PaymentService","i4","NotificationService","selectors","decls","vars","template","DashboardComponent_Template","rf","ctx","ɵɵtext"],"sources":["D:\\MLMUPC\\new microService\\my-microservices\\frontend\\admin-web\\src\\app\\components\\dashboard\\dashboard.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { KeycloakService } from 'keycloak-angular';\nimport { OrderService } from '../../services/order.service';\nimport { PaymentService } from '../../services/payment.service';\nimport { NotificationService } from '../../services/notification.service';\nimport { Order, Payment, Notification } from '../../models';\n\n@Component({\n  selector: 'app-dashboard',\n  template: 'template.html',\n  styles: []\n})\nexport class DashboardComponent implements OnInit {\n  userProfile: any = {};\n  userRoles: string[] = [];\n  \n  totalOrders = 0;\n  totalPayments = 0;\n  pendingOrders = 0;\n  totalNotifications = 0;\n  \n  recentOrders: Order[] = [];\n  recentPayments: Payment[] = [];\n  recentNotifications: Notification[] = [];\n  \n  loading = true;\n\n  constructor(\n    private keycloakService: KeycloakService,\n    private orderService: OrderService,\n    private paymentService: PaymentService,\n    private notificationService: NotificationService\n  ) {}\n\n  async ngOnInit() {\n    if (await this.keycloakService.isLoggedIn()) {\n      this.userProfile = await this.keycloakService.loadUserProfile();\n      const tokenParsed = this.keycloakService.getKeycloakInstance().tokenParsed;\n      this.userRoles = tokenParsed?.realm_access?.roles || [];\n      \n      this.loadDashboardData();\n    }\n  }\n\n  loadDashboardData() {\n    this.loading = true;\n    \n    // Load orders\n    this.orderService.getOrders({ page: 1, limit: 5 }).subscribe({\n      next: (response) => {\n        this.recentOrders = response.data;\n        this.totalOrders = response.pagination.total;\n        this.pendingOrders = response.data.filter(o => o.status === 'pending').length;\n      },\n      error: (err) => console.error('Failed to load orders:', err)\n    });\n\n    // Load payments\n    this.paymentService.getPayments({ page: 1, limit: 5 }).subscribe({\n      next: (response) => {\n        this.recentPayments = response.data;\n        this.totalPayments = response.pagination.total;\n      },\n      error: (err) => console.error('Failed to load payments:', err)\n    });\n\n    this.loading = false;\n  }\n\n  getStatusClass(status: string): string {\n    switch (status) {\n      case 'completed': return 'bg-green-100 text-green-800';\n      case 'pending': return 'bg-yellow-100 text-yellow-800';\n      case 'processing': return 'bg-blue-100 text-blue-800';\n      case 'cancelled': return 'bg-red-100 text-red-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  }\n\n  getPaymentStatusClass(status: string): string {\n    switch (status) {\n      case 'completed': return 'bg-green-100 text-green-800';\n      case 'pending': return 'bg-yellow-100 text-yellow-800';\n      case 'processing': return 'bg-blue-100 text-blue-800';\n      case 'failed': return 'bg-red-100 text-red-800';\n      case 'refunded': return 'bg-gray-100 text-gray-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  }\n\n  logout() {\n    this.keycloakService.logout();\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}