<nav class="navbar">
<div class="container" style="display: flex; justify-content: space-between; align-items: center;">
    <a class="navbar-brand" routerLink="/">Admin Dashboard</a>
    <div class="navbar-nav">
    <a class="nav-link" routerLink="/">Home</a>
    <a class="nav-link" routerLink="/dashboard">Dashboard</a>
    <a class="nav-link" routerLink="/users">Users</a>
    <a class="nav-link" routerLink="/orders">Orders</a>
    <a class="nav-link" routerLink="/payments">Payments</a>
    <a class="nav-link" routerLink="/notifications">Notifications</a>
    <button class="btn btn-danger" style="margin-left: 10px;" (click)="logout()">Logout</button>
    </div>
</div>
</nav>

<div class="container" style="padding-top: 30px;">
<h1 style="margin-bottom: 30px;">Dashboard</h1>

<!-- Stats Cards -->
<div class="grid" style="margin-bottom: 30px;">
    <div class="card">
    <h3>Total Orders</h3>
    <p style="font-size: 36px; font-weight: bold; color: #007bff; margin: 10px 0;">{{ totalOrders }}</p>
    <p style="color: #666;">Across all users</p>
    </div>
    <div class="card">
    <h3>Total Payments</h3>
    <p style="font-size: 36px; font-weight: bold; color: #28a745; margin: 10px 0;">{{ totalPayments }}</p>
    <p style="color: #666;">Processed payments</p>
    </div>
    <div class="card">
    <h3>Pending Orders</h3>
    <p style="font-size: 36px; font-weight: bold; color: #ffc107; margin: 10px 0;">{{ pendingOrders }}</p>
    <p style="color: #666;">Awaiting processing</p>
    </div>
    <div class="card">
    <h3>Notifications</h3>
    <p style="font-size: 36px; font-weight: bold; color: #17a2b8; margin: 10px 0;">{{ totalNotifications }}</p>
    <p style="color: #666;">Total sent</p>
    </div>
</div>

<!-- User Info -->
<div class="card" style="margin-bottom: 30px;">
    <h3>Current User</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
    <div>
        <p style="color: #666; margin-bottom: 5px;">Username</p>
        <p style="font-weight: 500;">{{ userProfile?.username }}</p>
    </div>
    <div>
        <p style="color: #666; margin-bottom: 5px;">Email</p>
        <p style="font-weight: 500;">{{ userProfile?.email }}</p>
    </div>
    <div>
        <p style="color: #666; margin-bottom: 5px;">Name</p>
        <p style="font-weight: 500;">{{ userProfile?.firstName }} {{ userProfile?.lastName }}</p>
    </div>
    <div>
        <p style="color: #666; margin-bottom: 5px;">Roles</p>
        <p style="font-weight: 500;">{{ userRoles?.join(', ') }}</p>
    </div>
    </div>
</div>

<!-- Recent Data -->
<div class="grid" style="margin-bottom: 30px;">
    <!-- Recent Orders -->
    <div class="card">
    <h3 style="margin-bottom: 20px;">Recent Orders</h3>
    <div *ngIf="loading" style="text-align: center; padding: 20px;">Loading...</div>
    <div *ngIf="!loading && recentOrders.length === 0" style="text-align: center; padding: 20px; color: #666;">
        No orders yet
    </div>
    <table *ngIf="!loading && recentOrders.length > 0" style="width: 100%; border-collapse: collapse;">
        <thead>
        <tr style="border-bottom: 1px solid #ddd;">
            <th style="text-align: left; padding: 10px;">Order #</th>
            <th style="text-align: left; padding: 10px;">Status</th>
            <th style="text-align: right; padding: 10px;">Amount</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let order of recentOrders" style="border-bottom: 1px solid #eee;">
            <td style="padding: 10px;">{{ order.orderNumber }}</td>
            <td style="padding: 10px;">
            <span [ngClass]="getStatusClass(order.status)" style="padding: 4px 8px; border-radius: 4px; font-size: 12px;">
                {{ order.status }}
            </span>
            </td>
            <td style="padding: 10px; text-align: right;">${{ order.totalAmount }}</td>
        </tr>
        </tbody>
    </table>
    <div style="margin-top: 15px; text-align: right;">
        <a routerLink="/orders" style="color: #007bff;">View all orders →</a>
    </div>
    </div>

    <!-- Recent Payments -->
    <div class="card">
    <h3 style="margin-bottom: 20px;">Recent Payments</h3>
    <div *ngIf="loading" style="text-align: center; padding: 20px;">Loading...</div>
    <div *ngIf="!loading && recentPayments.length === 0" style="text-align: center; padding: 20px; color: #666;">
        No payments yet
    </div>
    <table *ngIf="!loading && recentPayments.length > 0" style="width: 100%; border-collapse: collapse;">
        <thead>
        <tr style="border-bottom: 1px solid #ddd;">
            <th style="text-align: left; padding: 10px;">Method</th>
            <th style="text-align: left; padding: 10px;">Status</th>
            <th style="text-align: right; padding: 10px;">Amount</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let payment of recentPayments" style="border-bottom: 1px solid #eee;">
            <td style="padding: 10px;">{{ payment.paymentMethod }}</td>
            <td style="padding: 10px;">
            <span [ngClass]="getPaymentStatusClass(payment.status)" style="padding: 4px 8px; border-radius: 4px; font-size: 12px;">
                {{ payment.status }}
            </span>
            </td>
            <td style="padding: 10px; text-align: right;">{{ payment.currency }} {{ payment.amount }}</td>
        </tr>
        </tbody>
    </table>
    <div style="margin-top: 15px; text-align: right;">
        <a routerLink="/payments" style="color: #007bff;">View all payments →</a>
    </div>
    </div>
</div>

<!-- System Status -->
<div class="card">
    <h3 style="margin-bottom: 20px;">System Status</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
    <div style="padding: 15px; background: #d4edda; border-radius: 8px;">
        <p style="font-weight: 500; color: #155724;">Auth Service</p>
        <p style="font-size: 12px; color: #155724;">Online</p>
    </div>
    <div style="padding: 15px; background: #d4edda; border-radius: 8px;">
        <p style="font-weight: 500; color: #155724;">User Service</p>
        <p style="font-size: 12px; color: #155724;">Online</p>
    </div>
    <div style="padding: 15px; background: #d4edda; border-radius: 8px;">
        <p style="font-weight: 500; color: #155724;">Order Service</p>
        <p style="font-size: 12px; color: #155724;">Online</p>
    </div>
    <div style="padding: 15px; background: #d4edda; border-radius: 8px;">
        <p style="font-weight: 500; color: #155724;">Payment Service</p>
        <p style="font-size: 12px; color: #155724;">Online</p>
    </div>
    <div style="padding: 15px; background: #d4edda; border-radius: 8px;">
        <p style="font-weight: 500; color: #155724;">Notification Service</p>
        <p style="font-size: 12px; color: #155724;">Online</p>
    </div>
    </div>
</div>
</div>