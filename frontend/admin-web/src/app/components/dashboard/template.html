<div class="dashboard-page">
<div class="container">
    <!-- Welcome Section -->
    <div class="welcome-section">
    <div class="welcome-content">
        <h1>Welcome back, {{ getUserGreeting() }}!</h1>
        <p>Here's what's happening with your platform today.</p>
    </div>
    <div class="quick-actions">
        <a routerLink="/users" class="btn btn-primary">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="8.5" cy="7" r="4"/>
            <line x1="20" y1="8" x2="20" y2="14"/>
            <line x1="23" y1="11" x2="17" y2="11"/>
        </svg>
        Manage Users
        </a>
    </div>
    </div>

    <!-- Stats Cards -->
    <div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon blue">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
        </svg>
        </div>
        <div class="stat-info">
        <span class="stat-value">{{ stats.users }}</span>
        <span class="stat-label">Total Users</span>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon green">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="9" cy="21" r="1"/>
            <circle cx="20" cy="21" r="1"/>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
        </svg>
        </div>
        <div class="stat-info">
        <span class="stat-value">{{ stats.orders }}</span>
        <span class="stat-label">Total Orders</span>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon purple">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="1" x2="12" y2="23"/>
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
        </svg>
        </div>
        <div class="stat-info">
        <span class="stat-value">\${{ stats.revenue }}</span>
        <span class="stat-label">Revenue</span>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon orange">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
        </svg>
        </div>
        <div class="stat-info">
        <span class="stat-value">{{ stats.notifications }}</span>
        <span class="stat-label">Notifications</span>
        </div>
    </div>
    </div>

    <!-- Main Content Grid -->
    <div class="content-grid">
    <!-- User Profile Card -->
    <div class="card profile-card">
        <div class="card-header">
        <h3 class="card-title">Your Profile</h3>
        </div>
        <div class="profile-content">
        <div class="profile-avatar">
            {{ getUserInitials() }}
        </div>
        <div class="profile-info">
            <h4>{{ userInfo?.name || userInfo?.preferred_username }}</h4>
            <p>{{ userInfo?.email }}</p>
            <div class="profile-roles">
            <span *ngFor="let role of getUserRoles()" class="role-badge" [class.admin]="role === 'admin'">
                {{ role }}
            </span>
            </div>
        </div>
        <a routerLink="/profile" class="btn btn-outline btn-sm">View Profile</a>
        </div>
    </div>

    <!-- Recent Activity -->
    <div class="card activity-card">
        <div class="card-header">
        <h3 class="card-title">Recent Activity</h3>
        <span class="activity-count">Last 7 days</span>
        </div>
        <div class="activity-list">
        <div class="activity-item" *ngFor="let activity of recentActivity">
            <div class="activity-icon" [ngClass]="activity.type">
            <svg *ngIf="activity.type === 'user'" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
            </svg>
            <svg *ngIf="activity.type === 'order'" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="9" cy="21" r="1"/>
                <circle cx="20" cy="21" r="1"/>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
            </svg>
            <svg *ngIf="activity.type === 'payment'" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                <line x1="1" y1="10" x2="23" y2="10"/>
            </svg>
            </div>
            <div class="activity-content">
            <p class="activity-text">{{ activity.text }}</p>
            <span class="activity-time">{{ activity.time }}</span>
            </div>
        </div>
        </div>
    </div>

    <!-- Quick Links -->
    <div class="card quick-links-card">
        <div class="card-header">
        <h3 class="card-title">Quick Links</h3>
        </div>
        <div class="quick-links">
        <a routerLink="/users" class="quick-link-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
            <span>Users</span>
        </a>
        <a routerLink="/orders" class="quick-link-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="9" cy="21" r="1"/>
            <circle cx="20" cy="21" r="1"/>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
            </svg>
            <span>Orders</span>
        </a>
        <a routerLink="/payments" class="quick-link-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="1" x2="12" y2="23"/>
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
            </svg>
            <span>Payments</span>
        </a>
        <a routerLink="/profile" class="quick-link-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
            </svg>
            <span>Profile</span>
        </a>
        </div>
    </div>

    <!-- System Status -->
    <div class="card status-card">
        <div class="card-header">
        <h3 class="card-title">System Status</h3>
        </div>
        <div class="status-list">
        <div class="status-item" *ngFor="let service of services">
            <div class="status-indicator" [ngClass]="service.status"></div>
            <span class="status-name">{{ service.name }}</span>
            <span class="status-badge" [ngClass]="service.status">{{ service.status }}</span>
        </div>
        </div>
    </div>
    </div>
</div>
</div>